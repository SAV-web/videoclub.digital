import{C as te,F as ne,I as G,S as X,c as W,a as st,s as nr,f as ar,b as sr,d as H,e as Et,g as ue,t as $,h as Se,i as He,j as or,k as lr,l as cr,m as ur,u as fr,n as ot,o as le,p as Be,q as _,r as dr,v as hr,w as pr,x as vr,y as mr,L as gr}from"./index-BIYfxE9S.js";import{closeModal as br}from"./modal-DISvOczQ.js";var J;(function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"})(J||(J={}));var O;(function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"})(O||(O={}));function Sr(t){return Ee(t)&&typeof t.from=="function"}function Ee(t){return typeof t=="object"&&typeof t.to=="function"}function lt(t){t.parentElement.removeChild(t)}function Ne(t){return t!=null}function ct(t){t.preventDefault()}function Er(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function wr(t,e){return Math.round(t/e)*e}function Ar(t,e){var n=t.getBoundingClientRect(),s=t.ownerDocument,o=s.documentElement,l=wt(s);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(l.x=0),e?n.top+l.y-o.clientTop:n.left+l.x-o.clientLeft}function q(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function ut(t,e,n){n>0&&(F(t,e),setTimeout(function(){me(t,e)},n))}function ft(t){return Math.max(Math.min(t,100),0)}function we(t){return Array.isArray(t)?t:[t]}function Cr(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function F(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function me(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function xr(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function wt(t){var e=window.pageXOffset!==void 0,n=(t.compatMode||"")==="CSS1Compat",s=e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,o=e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop;return{x:s,y:o}}function yr(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function Lr(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch{}return t}function Dr(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function ze(t,e){return 100/(e-t)}function qe(t,e,n){return e*100/(t[n+1]-t[n])}function Pr(t,e){return qe(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function Mr(t,e){return e*(t[1]-t[0])/100+t[0]}function ce(t,e){for(var n=1;t>=e[n];)n+=1;return n}function Tr(t,e,n){if(n>=t.slice(-1)[0])return 100;var s=ce(n,t),o=t[s-1],l=t[s],c=e[s-1],h=e[s];return c+Pr([o,l],n)/ze(c,h)}function Vr(t,e,n){if(n>=100)return t.slice(-1)[0];var s=ce(n,e),o=t[s-1],l=t[s],c=e[s-1],h=e[s];return Mr([o,l],(n-c)*ze(c,h))}function Rr(t,e,n,s){if(s===100)return s;var o=ce(s,t),l=t[o-1],c=t[o];return n?s-l>(c-l)/2?c:l:e[o-1]?t[o-1]+wr(s-t[o-1],e[o-1]):s}var At=(function(){function t(e,n,s){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[s||!1],this.xNumSteps=[!1],this.snap=n;var o,l=[];for(Object.keys(e).forEach(function(c){l.push([we(e[c]),c])}),l.sort(function(c,h){return c[0][0]-h[0][0]}),o=0;o<l.length;o++)this.handleEntryPoint(l[o][1],l[o][0]);for(this.xNumSteps=this.xSteps.slice(0),o=0;o<this.xNumSteps.length;o++)this.handleStepPoint(o,this.xNumSteps[o])}return t.prototype.getDistance=function(e){for(var n=[],s=0;s<this.xNumSteps.length-1;s++)n[s]=qe(this.xVal,e,s);return n},t.prototype.getAbsoluteDistance=function(e,n,s){var o=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[o+1];)o++;else e===this.xPct[this.xPct.length-1]&&(o=this.xPct.length-2);!s&&e===this.xPct[o+1]&&o++,n===null&&(n=[]);var l,c=1,h=n[o],v=0,m=0,S=0,E=0;for(s?l=(e-this.xPct[o])/(this.xPct[o+1]-this.xPct[o]):l=(this.xPct[o+1]-e)/(this.xPct[o+1]-this.xPct[o]);h>0;)v=this.xPct[o+1+E]-this.xPct[o+E],n[o+E]*c+100-l*100>100?(m=v*l,c=(h-100*l)/n[o+E],l=1):(m=n[o+E]*v/100*c,c=0),s?(S=S-m,this.xPct.length+E>=1&&E--):(S=S+m,this.xPct.length-E>=1&&E++),h=n[o+E]*c;return e+S},t.prototype.toStepping=function(e){return e=Tr(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return Vr(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=Rr(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,n,s){var o=ce(e,this.xPct);return(e===100||n&&e===this.xPct[o-1])&&(o=Math.max(o-1,1)),(this.xVal[o]-this.xVal[o-1])/s},t.prototype.getNearbySteps=function(e){var n=ce(e,this.xPct);return{stepBefore:{startValue:this.xVal[n-2],step:this.xNumSteps[n-2],highestStep:this.xHighestCompleteStep[n-2]},thisStep:{startValue:this.xVal[n-1],step:this.xNumSteps[n-1],highestStep:this.xHighestCompleteStep[n-1]},stepAfter:{startValue:this.xVal[n],step:this.xNumSteps[n],highestStep:this.xHighestCompleteStep[n]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(Cr);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,n){var s;if(e==="min"?s=0:e==="max"?s=100:s=parseFloat(e),!q(s)||!q(n[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(s),this.xVal.push(n[0]);var o=Number(n[1]);s?this.xSteps.push(isNaN(o)?!1:o):isNaN(o)||(this.xSteps[0]=o),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,n){if(n){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=qe([this.xVal[e],this.xVal[e+1]],n,0)/ze(this.xPct[e],this.xPct[e+1]);var s=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],o=Math.ceil(Number(s.toFixed(3))-1),l=this.xVal[e]+this.xNumSteps[e]*o;this.xHighestCompleteStep[e]=l}},t})(),dt={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},Ct={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},K={tooltips:".__tooltips",aria:".__aria"};function _r(t,e){if(!q(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function Ir(t,e){if(!q(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function kr(t,e){if(!q(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function Fr(t,e){if(!q(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function Or(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new At(e,t.snap||!1,t.singleStep)}function Ur(t,e){if(e=we(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function Hr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function Br(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function Nr(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function xt(t,e){var n=[!1],s;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(s=1;s<t.handles;s++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");n=e}t.connect=n}function qr(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function yt(t,e){if(!q(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function zr(t,e){if(!q(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function jr(t,e){var n;if(!q(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||q(e[0])||q(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],n=0;n<t.spectrum.xNumSteps.length-1;n++)if(t.padding[0][n]<0||t.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var s=e[0]+e[1],o=t.spectrum.xVal[0],l=t.spectrum.xVal[t.spectrum.xVal.length-1];if(s/(l-o)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Yr(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Xr(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,s=e.indexOf("drag")>=0,o=e.indexOf("fixed")>=0,l=e.indexOf("snap")>=0,c=e.indexOf("hover")>=0,h=e.indexOf("unconstrained")>=0,v=e.indexOf("invert-connects")>=0,m=e.indexOf("drag-all")>=0,S=e.indexOf("smooth-steps")>=0;if(o){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");yt(t,t.start[1]-t.start[0])}if(v&&t.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(h&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:n||l,drag:s,dragAll:m,smoothSteps:S,fixed:o,snap:l,hover:c,unconstrained:h,invertConnects:v}}function Wr(t,e){if(e!==!1)if(e===!0||Ee(e)){t.tooltips=[];for(var n=0;n<t.handles;n++)t.tooltips.push(e)}else{if(e=we(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(s){if(typeof s!="boolean"&&!Ee(s))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function $r(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function Gr(t,e){if(!Ee(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function Kr(t,e){if(!Sr(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function Jr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function Qr(t,e){t.documentElement=e}function Zr(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function ei(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(n){t.cssClasses[n]=t.cssPrefix+e[n]})):t.cssClasses=e}function Lt(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:dt,format:dt},n={step:{r:!1,t:_r},keyboardPageMultiplier:{r:!1,t:Ir},keyboardMultiplier:{r:!1,t:kr},keyboardDefaultStep:{r:!1,t:Fr},start:{r:!0,t:Ur},connect:{r:!0,t:xt},direction:{r:!0,t:Yr},snap:{r:!1,t:Hr},animate:{r:!1,t:Br},animationDuration:{r:!1,t:Nr},range:{r:!0,t:Or},orientation:{r:!1,t:qr},margin:{r:!1,t:yt},limit:{r:!1,t:zr},padding:{r:!1,t:jr},behaviour:{r:!0,t:Xr},ariaFormat:{r:!1,t:Gr},format:{r:!1,t:Kr},tooltips:{r:!1,t:Wr},keyboardSupport:{r:!0,t:Jr},documentElement:{r:!1,t:Qr},cssPrefix:{r:!0,t:Zr},cssClasses:{r:!0,t:ei},handleAttributes:{r:!1,t:$r}},s={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Ct,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(n).forEach(function(v){if(!Ne(t[v])&&s[v]===void 0){if(n[v].r)throw new Error("noUiSlider: '"+v+"' is required.");return}n[v].t(e,Ne(t[v])?t[v]:s[v])}),e.pips=t.pips;var o=document.createElement("div"),l=o.style.msTransform!==void 0,c=o.style.transform!==void 0;e.transformRule=c?"transform":l?"msTransform":"webkitTransform";var h=[["left","top"],["right","bottom"]];return e.style=h[e.dir][e.ort],e}function ti(t,e,n){var s=yr(),o=Dr(),l=o&&Lr(),c=t,h,v,m,S,E,I,w=e.spectrum,z=[],L=[],U=[],xe=0,j={},ae=!1,ie=t.ownerDocument,fe=e.documentElement||ie.documentElement,de=ie.body,Vt=ie.dir==="rtl"||e.ort===1?0:100;function Y(r,i){var a=ie.createElement("div");return i&&F(a,i),r.appendChild(a),a}function Rt(r,i){var a=Y(r,e.cssClasses.origin),u=Y(a,e.cssClasses.handle);if(Y(u,e.cssClasses.touchArea),u.setAttribute("data-handle",String(i)),e.keyboardSupport&&(u.setAttribute("tabindex","0"),u.addEventListener("keydown",function(d){return $t(d,i)})),e.handleAttributes!==void 0){var f=e.handleAttributes[i];Object.keys(f).forEach(function(d){u.setAttribute(d,f[d])})}return u.setAttribute("role","slider"),u.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),i===0?F(u,e.cssClasses.handleLower):i===e.handles-1&&F(u,e.cssClasses.handleUpper),a.handle=u,a}function ye(r,i){return i?Y(r,e.cssClasses.connect):!1}function _t(r,i){v=Y(i,e.cssClasses.connects),m=[],S=[],S.push(ye(v,r[0]));for(var a=0;a<e.handles;a++)m.push(Rt(i,a)),U[a]=a,S.push(ye(v,r[a+1]))}function It(r){F(r,e.cssClasses.target),e.dir===0?F(r,e.cssClasses.ltr):F(r,e.cssClasses.rtl),e.ort===0?F(r,e.cssClasses.horizontal):F(r,e.cssClasses.vertical);var i=getComputedStyle(r).direction;return i==="rtl"?F(r,e.cssClasses.textDirectionRtl):F(r,e.cssClasses.textDirectionLtr),Y(r,e.cssClasses.base)}function kt(r,i){return!e.tooltips||!e.tooltips[i]?!1:Y(r.firstChild,e.cssClasses.tooltip)}function Ye(){return c.hasAttribute("disabled")}function Le(r){var i=m[r];return i.hasAttribute("disabled")}function Ft(r){r!=null?(m[r].setAttribute("disabled",""),m[r].handle.removeAttribute("tabindex")):(c.setAttribute("disabled",""),m.forEach(function(i){i.handle.removeAttribute("tabindex")}))}function Ot(r){r!=null?(m[r].removeAttribute("disabled"),m[r].handle.setAttribute("tabindex","0")):(c.removeAttribute("disabled"),m.forEach(function(i){i.removeAttribute("disabled"),i.handle.setAttribute("tabindex","0")}))}function De(){I&&(se("update"+K.tooltips),I.forEach(function(r){r&&lt(r)}),I=null)}function Xe(){De(),I=m.map(kt),Re("update"+K.tooltips,function(r,i,a){if(!(!I||!e.tooltips)&&I[i]!==!1){var u=r[i];e.tooltips[i]!==!0&&(u=e.tooltips[i].to(a[i])),I[i].innerHTML=u}})}function Ut(){se("update"+K.aria),Re("update"+K.aria,function(r,i,a,u,f){U.forEach(function(d){var g=m[d],p=he(L,d,0,!0,!0,!0),x=he(L,d,100,!0,!0,!0),y=f[d],D=String(e.ariaFormat.to(a[d]));p=w.fromStepping(p).toFixed(1),x=w.fromStepping(x).toFixed(1),y=w.fromStepping(y).toFixed(1),g.children[0].setAttribute("aria-valuemin",p),g.children[0].setAttribute("aria-valuemax",x),g.children[0].setAttribute("aria-valuenow",y),g.children[0].setAttribute("aria-valuetext",D)})})}function Ht(r){if(r.mode===J.Range||r.mode===J.Steps)return w.xVal;if(r.mode===J.Count){if(r.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var i=r.values-1,a=100/i,u=[];i--;)u[i]=i*a;return u.push(100),We(u,r.stepped)}return r.mode===J.Positions?We(r.values,r.stepped):r.mode===J.Values?r.stepped?r.values.map(function(f){return w.fromStepping(w.getStep(w.toStepping(f)))}):r.values:[]}function We(r,i){return r.map(function(a){return w.fromStepping(i?w.getStep(a):a)})}function Bt(r){function i(y,D){return Number((y+D).toFixed(7))}var a=Ht(r),u={},f=w.xVal[0],d=w.xVal[w.xVal.length-1],g=!1,p=!1,x=0;return a=Er(a.slice().sort(function(y,D){return y-D})),a[0]!==f&&(a.unshift(f),g=!0),a[a.length-1]!==d&&(a.push(d),p=!0),a.forEach(function(y,D){var P,C,T,k=y,V=a[D+1],R,ke,Fe,Oe,it,Ue,nt,at=r.mode===J.Steps;for(at&&(P=w.xNumSteps[D]),P||(P=V-k),V===void 0&&(V=k),P=Math.max(P,1e-7),C=k;C<=V;C=i(C,P)){for(R=w.toStepping(C),ke=R-x,it=ke/(r.density||1),Ue=Math.round(it),nt=ke/Ue,T=1;T<=Ue;T+=1)Fe=x+T*nt,u[Fe.toFixed(5)]=[w.fromStepping(Fe),0];Oe=a.indexOf(C)>-1?O.LargeValue:at?O.SmallValue:O.NoValue,!D&&g&&C!==V&&(Oe=0),C===V&&p||(u[R.toFixed(5)]=[C,Oe]),x=R}}),u}function Nt(r,i,a){var u,f,d=ie.createElement("div"),g=(u={},u[O.None]="",u[O.NoValue]=e.cssClasses.valueNormal,u[O.LargeValue]=e.cssClasses.valueLarge,u[O.SmallValue]=e.cssClasses.valueSub,u),p=(f={},f[O.None]="",f[O.NoValue]=e.cssClasses.markerNormal,f[O.LargeValue]=e.cssClasses.markerLarge,f[O.SmallValue]=e.cssClasses.markerSub,f),x=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],y=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];F(d,e.cssClasses.pips),F(d,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function D(C,T){var k=T===e.cssClasses.value,V=k?x:y,R=k?g:p;return T+" "+V[e.ort]+" "+R[C]}function P(C,T,k){if(k=i?i(T,k):k,k!==O.None){var V=Y(d,!1);V.className=D(k,e.cssClasses.marker),V.style[e.style]=C+"%",k>O.NoValue&&(V=Y(d,!1),V.className=D(k,e.cssClasses.value),V.setAttribute("data-value",String(T)),V.style[e.style]=C+"%",V.innerHTML=String(a.to(T)))}}return Object.keys(r).forEach(function(C){P(C,r[C][0],r[C][1])}),d}function Pe(){E&&(lt(E),E=null)}function Me(r){Pe();var i=Bt(r),a=r.filter,u=r.format||{to:function(f){return String(Math.round(f))}};return E=c.appendChild(Nt(i,a,u)),E}function $e(){var r=h.getBoundingClientRect(),i="offset"+["Width","Height"][e.ort];return e.ort===0?r.width||h[i]:r.height||h[i]}function Z(r,i,a,u){var f=function(g){var p=qt(g,u.pageOffset,u.target||i);if(!p||Ye()&&!u.doNotReject||xr(c,e.cssClasses.tap)&&!u.doNotReject||r===s.start&&p.buttons!==void 0&&p.buttons>1||u.hover&&p.buttons)return!1;l||p.preventDefault(),p.calcPoint=p.points[e.ort],a(p,u)},d=[];return r.split(" ").forEach(function(g){i.addEventListener(g,f,l?{passive:!0}:!1),d.push([g,f])}),d}function qt(r,i,a){var u=r.type.indexOf("touch")===0,f=r.type.indexOf("mouse")===0,d=r.type.indexOf("pointer")===0,g=0,p=0;if(r.type.indexOf("MSPointer")===0&&(d=!0),r.type==="mousedown"&&!r.buttons&&!r.touches)return!1;if(u){var x=function(P){var C=P.target;return C===a||a.contains(C)||r.composed&&r.composedPath().shift()===a};if(r.type==="touchstart"){var y=Array.prototype.filter.call(r.touches,x);if(y.length>1)return!1;g=y[0].pageX,p=y[0].pageY}else{var D=Array.prototype.find.call(r.changedTouches,x);if(!D)return!1;g=D.pageX,p=D.pageY}}return i=i||wt(ie),(f||d)&&(g=r.clientX+i.x,p=r.clientY+i.y),r.pageOffset=i,r.points=[g,p],r.cursor=f||d,r}function Ge(r){var i=r-Ar(h,e.ort),a=i*100/$e();return a=ft(a),e.dir?100-a:a}function zt(r){var i=100,a=!1;return m.forEach(function(u,f){if(!Le(f)){var d=L[f],g=Math.abs(d-r),p=g===100&&i===100,x=g<i,y=g<=i&&r>d;(x||y||p)&&(a=f,i=g)}}),a}function jt(r,i){r.type==="mouseout"&&r.target.nodeName==="HTML"&&r.relatedTarget===null&&Te(r,i)}function Yt(r,i){if(navigator.appVersion.indexOf("MSIE 9")===-1&&r.buttons===0&&i.buttonsProperty!==0)return Te(r,i);var a=(e.dir?-1:1)*(r.calcPoint-i.startCalcPoint),u=a*100/i.baseSize;Je(a>0,u,i.locations,i.handleNumbers,i.connect)}function Te(r,i){i.handle&&(me(i.handle,e.cssClasses.active),xe-=1),i.listeners.forEach(function(a){fe.removeEventListener(a[0],a[1])}),xe===0&&(me(c,e.cssClasses.drag),Ie(),r.cursor&&(de.style.cursor="",de.removeEventListener("selectstart",ct))),e.events.smoothSteps&&(i.handleNumbers.forEach(function(a){ee(a,L[a],!0,!0,!1,!1)}),i.handleNumbers.forEach(function(a){M("update",a)})),i.handleNumbers.forEach(function(a){M("change",a),M("set",a),M("end",a)})}function Ve(r,i){if(!i.handleNumbers.some(Le)){var a;if(i.handleNumbers.length===1){var u=m[i.handleNumbers[0]];a=u.children[0],xe+=1,F(a,e.cssClasses.active)}r.stopPropagation();var f=[],d=Z(s.move,fe,Yt,{target:r.target,handle:a,connect:i.connect,listeners:f,startCalcPoint:r.calcPoint,baseSize:$e(),pageOffset:r.pageOffset,handleNumbers:i.handleNumbers,buttonsProperty:r.buttons,locations:L.slice()}),g=Z(s.end,fe,Te,{target:r.target,handle:a,listeners:f,doNotReject:!0,handleNumbers:i.handleNumbers}),p=Z("mouseout",fe,jt,{target:r.target,handle:a,listeners:f,doNotReject:!0,handleNumbers:i.handleNumbers});f.push.apply(f,d.concat(g,p)),r.cursor&&(de.style.cursor=getComputedStyle(r.target).cursor,m.length>1&&F(c,e.cssClasses.drag),de.addEventListener("selectstart",ct,!1)),i.handleNumbers.forEach(function(x){M("start",x)})}}function Xt(r){r.stopPropagation();var i=Ge(r.calcPoint),a=zt(i);a!==!1&&(e.events.snap||ut(c,e.cssClasses.tap,e.animationDuration),ee(a,i,!0,!0),Ie(),M("slide",a,!0),M("update",a,!0),e.events.snap?Ve(r,{handleNumbers:[a]}):(M("change",a,!0),M("set",a,!0)))}function Wt(r){var i=Ge(r.calcPoint),a=w.getStep(i),u=w.fromStepping(a);Object.keys(j).forEach(function(f){f.split(".")[0]==="hover"&&j[f].forEach(function(d){d.call(ve,u)})})}function $t(r,i){if(Ye()||Le(i))return!1;var a=["Left","Right"],u=["Down","Up"],f=["PageDown","PageUp"],d=["Home","End"];e.dir&&!e.ort?a.reverse():e.ort&&!e.dir&&(u.reverse(),f.reverse());var g=r.key.replace("Arrow",""),p=g===f[0],x=g===f[1],y=g===u[0]||g===a[0]||p,D=g===u[1]||g===a[1]||x,P=g===d[0],C=g===d[1];if(!y&&!D&&!P&&!C)return!0;r.preventDefault();var T;if(D||y){var k=y?0:1,V=tt(i),R=V[k];if(R===null)return!1;R===!1&&(R=w.getDefaultStep(L[i],y,e.keyboardDefaultStep)),x||p?R*=e.keyboardPageMultiplier:R*=e.keyboardMultiplier,R=Math.max(R,1e-7),R=(y?-1:1)*R,T=z[i]+R}else C?T=e.spectrum.xVal[e.spectrum.xVal.length-1]:T=e.spectrum.xVal[0];return ee(i,w.toStepping(T),!0,!0),M("slide",i),M("update",i),M("change",i),M("set",i),!1}function Ke(r){r.fixed||m.forEach(function(i,a){Z(s.start,i.children[0],Ve,{handleNumbers:[a]})}),r.tap&&Z(s.start,h,Xt,{}),r.hover&&Z(s.move,h,Wt,{hover:!0}),r.drag&&S.forEach(function(i,a){if(!(i===!1||a===0||a===S.length-1)){var u=m[a-1],f=m[a],d=[i],g=[u,f],p=[a-1,a];F(i,e.cssClasses.draggable),r.fixed&&(d.push(u.children[0]),d.push(f.children[0])),r.dragAll&&(g=m,p=U),d.forEach(function(x){Z(s.start,x,Ve,{handles:g,handleNumbers:p,connect:i})})}})}function Re(r,i){j[r]=j[r]||[],j[r].push(i),r.split(".")[0]==="update"&&m.forEach(function(a,u){M("update",u)})}function Gt(r){return r===K.aria||r===K.tooltips}function se(r){var i=r&&r.split(".")[0],a=i?r.substring(i.length):r;Object.keys(j).forEach(function(u){var f=u.split(".")[0],d=u.substring(f.length);(!i||i===f)&&(!a||a===d)&&(!Gt(d)||a===d)&&delete j[u]})}function M(r,i,a){Object.keys(j).forEach(function(u){var f=u.split(".")[0];r===f&&j[u].forEach(function(d){d.call(ve,z.map(e.format.to),i,z.slice(),a||!1,L.slice(),ve)})})}function he(r,i,a,u,f,d,g){var p;return m.length>1&&!e.events.unconstrained&&(u&&i>0&&(p=w.getAbsoluteDistance(r[i-1],e.margin,!1),a=Math.max(a,p)),f&&i<m.length-1&&(p=w.getAbsoluteDistance(r[i+1],e.margin,!0),a=Math.min(a,p))),m.length>1&&e.limit&&(u&&i>0&&(p=w.getAbsoluteDistance(r[i-1],e.limit,!1),a=Math.min(a,p)),f&&i<m.length-1&&(p=w.getAbsoluteDistance(r[i+1],e.limit,!0),a=Math.max(a,p))),e.padding&&(i===0&&(p=w.getAbsoluteDistance(0,e.padding[0],!1),a=Math.max(a,p)),i===m.length-1&&(p=w.getAbsoluteDistance(100,e.padding[1],!0),a=Math.min(a,p))),g||(a=w.getStep(a)),a=ft(a),a===r[i]&&!d?!1:a}function _e(r,i){var a=e.ort;return(a?i:r)+", "+(a?r:i)}function Je(r,i,a,u,f){var d=a.slice(),g=u[0],p=e.events.smoothSteps,x=[!r,r],y=[r,!r];u=u.slice(),r&&u.reverse(),u.length>1?u.forEach(function(P,C){var T=he(d,P,d[P]+i,x[C],y[C],!1,p);T===!1?i=0:(i=T-d[P],d[P]=T)}):x=y=[!0];var D=!1;u.forEach(function(P,C){D=ee(P,a[P]+i,x[C],y[C],!1,p)||D}),D&&(u.forEach(function(P){M("update",P),M("slide",P)}),f!=null&&M("drag",g))}function Qe(r,i){return e.dir?100-r-i:r}function Kt(r,i){L[r]=i,z[r]=w.fromStepping(i);var a=Qe(i,0)-Vt,u="translate("+_e(a+"%","0")+")";if(m[r].style[e.transformRule]=u,e.events.invertConnects&&L.length>1){var f=L.every(function(d,g,p){return g===0||d>=p[g-1]});if(ae!==!f){rr();return}}oe(r),oe(r+1),ae&&(oe(r-1),oe(r+2))}function Ie(){U.forEach(function(r){var i=L[r]>50?-1:1,a=3+(m.length+i*r);m[r].style.zIndex=String(a)})}function ee(r,i,a,u,f,d){return f||(i=he(L,r,i,a,u,!1,d)),i===!1?!1:(Kt(r,i),!0)}function oe(r){if(S[r]){var i=L.slice();ae&&i.sort(function(p,x){return p-x});var a=0,u=100;r!==0&&(a=i[r-1]),r!==S.length-1&&(u=i[r]);var f=u-a,d="translate("+_e(Qe(a,f)+"%","0")+")",g="scale("+_e(f/100,"1")+")";S[r].style[e.transformRule]=d+" "+g}}function Ze(r,i){return r===null||r===!1||r===void 0||(typeof r=="number"&&(r=String(r)),r=e.format.from(r),r!==!1&&(r=w.toStepping(r)),r===!1||isNaN(r))?L[i]:r}function pe(r,i,a){var u=we(r),f=L[0]===void 0;i=i===void 0?!0:i,e.animate&&!f&&ut(c,e.cssClasses.tap,e.animationDuration),U.forEach(function(p){ee(p,Ze(u[p],p),!0,!1,a)});var d=U.length===1?0:1;if(f&&w.hasNoSize()&&(a=!0,L[0]=0,U.length>1)){var g=100/(U.length-1);U.forEach(function(p){L[p]=p*g})}for(;d<U.length;++d)U.forEach(function(p){ee(p,L[p],!0,!0,a)});Ie(),U.forEach(function(p){M("update",p),u[p]!==null&&i&&M("set",p)})}function Jt(r){pe(e.start,r)}function Qt(r,i,a,u){if(r=Number(r),!(r>=0&&r<U.length))throw new Error("noUiSlider: invalid handle number, got: "+r);ee(r,Ze(i,r),!0,!0,u),M("update",r),a&&M("set",r)}function et(r){if(r===void 0&&(r=!1),r)return z.length===1?z[0]:z.slice(0);var i=z.map(e.format.to);return i.length===1?i[0]:i}function Zt(){for(se(K.aria),se(K.tooltips),Object.keys(e.cssClasses).forEach(function(r){me(c,e.cssClasses[r])});c.firstChild;)c.removeChild(c.firstChild);delete c.noUiSlider}function tt(r){var i=L[r],a=w.getNearbySteps(i),u=z[r],f=a.thisStep.step,d=null;if(e.snap)return[u-a.stepBefore.startValue||null,a.stepAfter.startValue-u||null];f!==!1&&u+f>a.stepAfter.startValue&&(f=a.stepAfter.startValue-u),u>a.thisStep.startValue?d=a.thisStep.step:a.stepBefore.step===!1?d=!1:d=u-a.stepBefore.highestStep,i===100?f=null:i===0&&(d=null);var g=w.countStepDecimals();return f!==null&&f!==!1&&(f=Number(f.toFixed(g))),d!==null&&d!==!1&&(d=Number(d.toFixed(g))),[d,f]}function er(){return U.map(tt)}function tr(r,i){var a=et(),u=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];u.forEach(function(d){r[d]!==void 0&&(n[d]=r[d])});var f=Lt(n);u.forEach(function(d){r[d]!==void 0&&(e[d]=f[d])}),w=f.spectrum,e.margin=f.margin,e.limit=f.limit,e.padding=f.padding,e.pips?Me(e.pips):Pe(),e.tooltips?Xe():De(),L=[],pe(Ne(r.start)?r.start:a,i),r.connect&&rt()}function rt(){for(;v.firstChild;)v.removeChild(v.firstChild);for(var r=0;r<=e.handles;r++)S[r]=ye(v,e.connect[r]),oe(r);Ke({drag:e.events.drag,fixed:!0})}function rr(){ae=!ae,xt(e,e.connect.map(function(r){return!r})),rt()}function ir(){h=It(c),_t(e.connect,h),Ke(e.events),pe(e.start),e.pips&&Me(e.pips),e.tooltips&&Xe(),Ut()}ir();var ve={destroy:Zt,steps:er,on:Re,off:se,get:et,set:pe,setHandle:Qt,reset:Jt,disable:Ft,enable:Ot,__moveHandles:function(r,i,a){Je(r,i,L,a)},options:n,updateOptions:tr,target:c,removePips:Pe,removeTooltips:De,getPositions:function(){return L.slice()},getTooltips:function(){return I},getOrigins:function(){return m},pips:Me};return ve}function ri(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var n=Lt(e),s=ti(t,n,e);return t.noUiSlider=s,s}const ii={__spectrum:At,cssClasses:Ct,create:ri},B=768,ht=.4;let Q=280;const b={sidebar:document.getElementById("sidebar"),sidebarInnerWrapper:document.querySelector(".sidebar-inner-wrapper"),rewindButton:document.querySelector("#rewind-button"),toggleRotationBtn:document.querySelector("#toggle-rotation-btn"),playButton:document.querySelector("#play-button"),collapsibleSections:document.querySelectorAll(".collapsible-section"),sidebarFilterForms:document.querySelectorAll(X.SIDEBAR_FILTER_FORM),sidebarScrollable:document.querySelector(".sidebar-scrollable-filters"),yearSlider:document.querySelector(X.YEAR_SLIDER),yearStartInput:document.querySelector(X.YEAR_START_INPUT),yearEndInput:document.querySelector(X.YEAR_END_INPUT),sidebarOverlay:document.getElementById("sidebar-overlay"),mainContent:document.querySelector(".main-content-wrapper")},Dt={};let ge=null,be=null,A={isDragging:!1,isHorizontalDrag:!1,startX:0,startY:0,startTime:0,currentTranslate:0,startTranslate:0,isInteractive:!1};const Pt=()=>{document.body.classList.add("sidebar-is-open"),b.sidebar.style.transform="",A.currentTranslate=0,Ae(!0)},N=()=>{document.body.classList.remove("sidebar-is-open"),b.sidebar.style.transform="",A.currentTranslate=-Q,Ae(!1)};function pt(){if(b.sidebar){const t=b.sidebar.offsetWidth;t>0&&(Q=t)}}function ni(t){if(window.innerWidth>B||document.body.classList.contains("modal-open"))return;const e=document.body.classList.contains("sidebar-is-open");if(!(e&&t.target.closest("#sidebar")||!e&&t.touches[0].clientX<150)){A.isDragging=!1;return}A.isDragging=!0,A.isHorizontalDrag=!1,A.startX=t.touches[0].clientX,A.startY=t.touches[0].clientY,A.startTime=Date.now(),A.startTranslate=e?0:-Q;const s=!e&&A.startX<30;A.isInteractive=!s&&!e&&!!t.target.closest("button, a, input, select, textarea, .movie-card, .noUi-handle"),document.addEventListener("touchmove",je,{passive:!1})}function je(t){if(!A.isDragging)return;const e=t.touches[0].clientX,n=t.touches[0].clientY,s=e-A.startX,o=n-A.startY;if(!A.isHorizontalDrag){const c=A.isInteractive?15:5;if(Math.abs(s)<c&&Math.abs(o)<c)return;if(Math.abs(o)>Math.abs(s)){A.isDragging=!1,document.removeEventListener("touchmove",je);return}A.isHorizontalDrag=!0,A.startX=e,A.startY=n,A.startTime=Date.now(),b.sidebar.classList.add("is-dragging"),document.body.classList.add("sidebar-is-dragging")}t.cancelable&&t.preventDefault();let l=A.startTranslate+(e-A.startX);if(l>0)l*=.2;else if(l<-Q){const c=Math.abs(l+Q);l=-Q-c*.2}A.currentTranslate=l,b.sidebar.style.transform=`translateX(${A.currentTranslate}px)`}function vt(t){if(!A.isDragging)return;if(document.removeEventListener("touchmove",je),!A.isHorizontalDrag){A.isDragging=!1;return}A.isDragging=!1,A.isHorizontalDrag=!1,b.sidebar.classList.remove("is-dragging"),document.body.classList.remove("sidebar-is-dragging");const e=Date.now()-A.startTime,s=t.changedTouches[0].clientX-A.startX,o=e>0?s/e:0;let l;o>ht?l=!0:o<-ht?l=!1:l=A.currentTranslate>-Q*.5,l?Pt():N()}function Ae(t){if(!b.rewindButton)return;b.rewindButton.innerHTML=t?G.REWIND:G.FORWARD,b.rewindButton.setAttribute("aria-label",t?"Contraer sidebar":"Expandir sidebar"),b.rewindButton.setAttribute("aria-expanded",t);const e=document.getElementById("mobile-sidebar-toggle");e&&(e.setAttribute("aria-expanded",String(t)),e.setAttribute("aria-label",t?"Cerrar menú de filtros":"Abrir menú de filtros"))}function ai(){b.sidebar&&(pt(),document.addEventListener("touchstart",ni,{passive:!0}),document.addEventListener("touchend",vt,{passive:!0}),document.addEventListener("touchcancel",vt,{passive:!0}),window.addEventListener("resize",()=>{window.innerWidth<=B&&pt(),window.innerWidth>B&&(document.body.classList.remove("sidebar-is-open"),b.sidebar.style.transform="",A.currentTranslate=-Q)}))}function Mt(t=null){const e=b.toggleRotationBtn;if(!e)return;const n=document.body.classList.contains("rotation-disabled"),s=t!==null?t:!n;if(n===s)return;$("medium"),fr(),br();const o=()=>{document.body.classList.toggle("rotation-disabled",s),e.innerHTML=s?G.SQUARE_STOP:G.PAUSE,e.setAttribute("aria-label",s?"Activar rotación de tarjetas":"Pausar rotación de tarjetas"),e.title=s?"Giro automático":"Vista Rápida",e.setAttribute("aria-pressed",s),gr.set("rotationState",s?"disabled":"enabled")};document.startViewTransition?document.startViewTransition(()=>o()):o(),Se(e)}let mt=!1;function si(){if(mt)return;const t=document.querySelector(".main-content-wrapper");if(!t)return;t.addEventListener("click",c=>{document.body.dataset.gestureCooldown==="true"&&c.target.closest(".movie-card, .grid-container")&&(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation())},{capture:!0});let e=null,n=!1,s=!1,o=null;const l=()=>{document.body.dataset.gestureCooldown="true",o&&clearTimeout(o),o=setTimeout(()=>{delete document.body.dataset.gestureCooldown,o=null},800)};t.addEventListener("touchstart",c=>{c.touches.length===2&&(n=!0,s=!1,e=Math.hypot(c.touches[0].pageX-c.touches[1].pageX,c.touches[0].pageY-c.touches[1].pageY))},{passive:!0}),t.addEventListener("touchmove",c=>{if(!n||c.touches.length!==2||e===null)return;if(s){l();return}const v=Math.hypot(c.touches[0].pageX-c.touches[1].pageX,c.touches[0].pageY-c.touches[1].pageY)-e;Math.abs(v)>60&&v<0&&(Mt(),l(),s=!0)},{passive:!0}),t.addEventListener("touchend",c=>{s&&l(),c.touches.length<2&&(n=!1,e=null),c.touches.length===0&&(s=!1)}),mt=!0}function oi(t,e,n){const s=t.querySelector(X.SIDEBAR_FILTER_INPUT);let o=t.querySelector(X.SIDEBAR_AUTOCOMPLETE_RESULTS);if(o||(o=W("div",{className:"sidebar-autocomplete-results"}),t.appendChild(o)),o.textContent="",e.length===0){s.setAttribute("aria-expanded","false"),s.removeAttribute("aria-activedescendant"),s.removeAttribute("aria-controls"),o.remove();return}o.id=`autocomplete-results-${t.dataset.filterType}`,o.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-controls",o.id);const l=document.createDocumentFragment();e.forEach((c,h)=>{const v=W("div",{className:te.SIDEBAR_AUTOCOMPLETE_ITEM,dataset:{value:c},id:`suggestion-item-${t.dataset.filterType}-${h}`,attributes:{role:"option"}});v.appendChild(vr(c,n)),l.appendChild(v)}),o.appendChild(l)}function li(){const t=ue(),n=mr()>=H.MAX_ACTIVE_FILTERS;ge||(ge=document.querySelectorAll(".filter-link")),ge.forEach(o=>{const l=o.dataset.filterType,c=o.dataset.filterValue,h=l==="genre"&&t.excludedGenres?.includes(c)||l==="country"&&t.excludedCountries?.includes(c),m=t[l]===c||h;if(o.style.display!==(m?"none":"flex")&&(o.style.display=m?"none":"flex"),!m){const E=n;o.hasAttribute("disabled")!==E&&(o.toggleAttribute("disabled",E),o.setAttribute("aria-disabled",String(E)),o.style.pointerEvents=E?"none":"auto",o.style.opacity=E?"0.5":"1")}const S=o.querySelector(".exclude-filter-btn");if(S){const E=l==="country"&&t.country;S.style.display!==(E?"none":"")&&(S.style.display=E?"none":"")}}),be||(be=document.querySelectorAll(".sidebar-filter-input")),be.forEach(o=>{o.disabled!==n&&(o.disabled=n,o.placeholder=n?"Límite de filtros":`Otro ${o.closest("form").dataset.filterType}...`)})}let gt={};function re(){const t=ue();let e=0;const n=(o,l,c=!1,h=0)=>{const v=W("div",{className:`filter-pill ${c?"filter-pill--exclude":""}`,dataset:{filterType:o,filterValue:l}});v.style.setProperty("--pill-index",h);const m=ne[o]?.items[l]||l;return v.appendChild(W("span",{textContent:m})),v.appendChild(W("span",{className:"remove-filter-btn",innerHTML:c?G.PAUSE_SMALL:"×",attributes:{"aria-hidden":"true"}})),v},s=o=>{const l=Dt[o];if(!l)return;const c=t[o];let h=[];o==="genre"?h=t.excludedGenres||[]:o==="country"&&(h=t.excludedCountries||[]);const v=`${o}-combined`,m=JSON.stringify({inc:c,exc:h});if(gt[v]===m){c&&e++,e+=h.length;return}gt[v]=m,l.textContent="",c&&l.appendChild(n(o,c,!1,e++)),h.forEach(S=>{l.appendChild(n(o,S,!0,e++))})};Object.keys(ne).forEach(o=>s(o)),li()}async function Ce(t,e,n=!1){const s=ue();if(e&&(t==="actor"||t==="director")){const c=s.sort,h=s.mediaType;dr(),hr(c),pr(h),_(t,e,!0),document.dispatchEvent(new CustomEvent("updateSidebarUI")),re(),document.dispatchEvent(new CustomEvent("uiActionTriggered"));try{await Be(1)}catch(v){v.name!=="AbortError"&&le("Error al cargar filmografía.","error")}return}e&&(t==="selection"&&s.studio?_("studio",null):t==="studio"&&s.selection&&_("selection",null));const l=n||s[t]!==e?e:null;if(l&&t!=="actor"&&t!=="director"&&(s.actor&&_("actor",null),s.director&&_("director",null)),l&&t==="country"&&_("excludedCountries",[],!0),!_(t,l)){le(`Límite de ${H.MAX_ACTIVE_FILTERS} filtros alcanzado.`,"error"),t==="selection"&&s.studio&&_("studio",s.studio),t==="studio"&&s.selection&&_("selection",s.selection);return}re(),document.dispatchEvent(new CustomEvent("uiActionTriggered"));try{await Be(1)}catch(c){if(c.name==="AbortError")return;console.error("Fallo al aplicar filtro:",c),le("No se pudo aplicar el filtro.","error"),_("selection",s.selection),_("studio",s.studio),_("actor",s.actor),_("director",s.director),_("excludedCountries",s.excludedCountries,!0),_(t,s[t]),re()}}async function Tt(t,e){const n=ue();if(!(t==="country"&&n.country)){if(!ot(t,e)){le("Límite de filtros alcanzado.","error");return}re(),document.dispatchEvent(new CustomEvent("uiActionTriggered"));try{await Be(1)}catch(s){if(s.name==="AbortError")return;le("No se pudo aplicar el filtro de exclusión.","error"),ot(t,e),_("country",n.country),_("genre",n.genre),re()}}}function ci(){b.playButton&&Se(b.playButton),$("medium"),document.dispatchEvent(new CustomEvent("filtersReset")),window.innerWidth<=B&&N()}function bt(){b.collapsibleSections.forEach(t=>{t.classList.remove(te.ACTIVE),t.querySelector(".section-header")?.setAttribute("aria-expanded","false")}),b.sidebarInnerWrapper&&b.sidebarInnerWrapper.classList.remove("is-compact")}function ui(){if(!b.yearSlider||!b.yearStartInput||!b.yearEndInput)return;const t=[b.yearStartInput,b.yearEndInput],e=ii.create(b.yearSlider,{start:[H.YEAR_MIN,H.YEAR_MAX],connect:!0,step:1,range:{min:H.YEAR_MIN,max:H.YEAR_MAX},format:{to:o=>Math.round(o),from:o=>Number(o)}});e.on("update",(o,l)=>{t[l].value=o[l]});const s=Et((o,l)=>{let[c,h]=o.map(Number);c>h&&(l===0?h=c:c=h);const v=`${c}-${h}`;Ce("year",v,!0),window.innerWidth<=B&&N()},500);e.on("set",s),t.forEach((o,l)=>{o.addEventListener("change",c=>{const h=parseFloat(c.target.value),v=e.get().map(S=>parseFloat(S));if(v[0]===v[1]){if(l===0&&h>v[0]){e.set([h,h]);return}if(l===1&&h<v[1]){e.set([h,h]);return}}const m=[null,null];m[l]=c.target.value,e.set(m)})}),document.addEventListener("updateSidebarUI",()=>{s.cancel();const l=(ue().year||`${H.YEAR_MIN}-${H.YEAR_MAX}`).split("-").map(Number);e.set(l,!1)})}function fi(){document.querySelectorAll(".year-input-wrapper").forEach(t=>{const e=t.querySelector(".year-input"),n=t.querySelector(".stepper-btn.stepper-up"),s=t.querySelector(".stepper-btn.stepper-down");if(!e||!n||!s)return;const o=l=>{$("light");let c=parseInt(e.value,10);isNaN(c)&&(c=l>0?H.YEAR_MIN:H.YEAR_MAX);const h=Math.min(Math.max(c+l,H.YEAR_MIN),H.YEAR_MAX);e.value=h,e.dispatchEvent(new Event("change",{bubbles:!0}))};n.addEventListener("click",()=>o(1)),s.addEventListener("click",()=>o(-1))})}const di={genre:ur,director:cr,actor:lr,country:or};function hi(t){return t.replace(/%/g,"\\%").replace(/_/g,"\\_")}function pi(){b.sidebarFilterForms.forEach(t=>{const e=t.querySelector(X.SIDEBAR_FILTER_INPUT),n=t.dataset.filterType,s=di[n];if(!e||!s)return;e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-expanded","false");const o=Et(async()=>{const l=e.value.trim();if(l.length<3){He(t);return}const c=hi(l),h=await s(c);oi(t,h,l)},H.SEARCH_DEBOUNCE_DELAY);e.addEventListener("input",o),e.addEventListener("keydown",l=>{const c=t.querySelector(X.SIDEBAR_AUTOCOMPLETE_RESULTS);if(!c||c.children.length===0)return;const h=Array.from(c.children);let v=h.findIndex(S=>S.classList.contains("is-active"));const m=S=>{h.forEach(E=>E.classList.remove("is-active")),S>=0&&h[S]?(h[S].classList.add("is-active"),e.setAttribute("aria-activedescendant",h[S].id)):e.removeAttribute("aria-activedescendant")};switch(l.key){case"ArrowDown":l.preventDefault(),v=Math.min(v+1,h.length-1),m(v);break;case"ArrowUp":l.preventDefault(),v=Math.max(v-1,-1),m(v);break;case"Enter":l.preventDefault(),v>=0&&h[v]&&h[v].click();break;case"Escape":l.preventDefault(),He();break}}),t.addEventListener("click",l=>{const c=l.target.closest(`.${te.SIDEBAR_AUTOCOMPLETE_ITEM}`);c&&($("light"),Ce(n,c.dataset.value),e.value="",He(),window.innerWidth<=B&&N())})})}function St(t){const e=t.target.closest(".filter-pill");if(!e)return!1;$("medium");const{filterType:n,filterValue:s}=e.dataset;return e.classList.add("is-removing"),e.addEventListener("animationend",()=>{e.classList.contains("filter-pill--exclude")?Tt(n,s):Ce(n,null)},{once:!0}),!0}function vi(){document.querySelectorAll(".collapsible-section .section-header").forEach(e=>{const n=document.createElement("div");n.innerHTML=G.CHEVRON_RIGHT,n.firstChild&&e.appendChild(n.firstChild)});const t=document.querySelector(".sidebar-static-filters");t&&t.addEventListener("click",e=>{St(e)&&window.innerWidth<=B&&N()}),b.rewindButton&&b.rewindButton.addEventListener("click",e=>{if($("light"),window.innerWidth<=B)document.body.classList.contains("sidebar-is-open")?N():Pt();else{document.body.classList.toggle("sidebar-collapsed");const s=document.body.classList.contains("sidebar-collapsed");Ae(!s)}}),b.sidebarOverlay&&b.sidebarOverlay.addEventListener("click",N),b.toggleRotationBtn&&b.toggleRotationBtn.addEventListener("click",e=>{Mt(),window.innerWidth<=B&&N()}),b.sidebarScrollable&&b.sidebarScrollable.addEventListener("click",e=>{const n=e.target.closest(".exclude-filter-btn");if(n){e.stopPropagation(),$("medium"),Se(n),Tt(n.dataset.type,n.dataset.value),window.innerWidth<=B&&N();return}if(St(e)){window.innerWidth<=B&&N();return}const s=e.target.closest(".filter-link");s&&!s.hasAttribute("disabled")&&($("light"),Se(s),Ce(s.dataset.filterType,s.dataset.filterValue),window.innerWidth<=B&&N())}),b.playButton&&b.playButton.addEventListener("click",ci),b.collapsibleSections.forEach(e=>{const n=e.querySelector(".section-header");n?.addEventListener("click",()=>{$("light");const o=!e.classList.contains(te.ACTIVE);b.collapsibleSections.forEach(l=>{l!==e&&(l.classList.remove(te.ACTIVE),l.querySelector(".section-header")?.setAttribute("aria-expanded","false"))}),e.classList.toggle(te.ACTIVE,o),n.setAttribute("aria-expanded",o),b.sidebarInnerWrapper?.classList.toggle("is-compact",o),o&&setTimeout(()=>{e.classList.contains(te.ACTIVE)&&n&&n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},300)})})}function bi(){window.innerWidth<=B&&Ae(!1);const t=n=>{const s=ne[n];if(!s)return;const o=n==="country"?"countries-content":`${n}s-content`,l=document.querySelector(`#${o} > div:first-child`);if(!l)return;const c=l.closest(".collapsible-section").querySelector(".active-filters-list");c&&(Dt[n]=c),l.textContent="";const h=document.createDocumentFragment();Object.entries(s.items).forEach(([v,m])=>{const S=W("button",{type:"button",className:"filter-link",dataset:{filterType:n,filterValue:v}});if(n==="studio"&&st[v]){const E=st[v];S.classList.add("filter-link--studio"),S.title=m;const I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.setAttribute("width",E.w||"24"),I.setAttribute("height",E.h||"24"),I.setAttribute("viewBox",E.vb||"0 0 24 24"),I.setAttribute("class",`sidebar-platform-icon ${E.class||""}`),I.setAttribute("fill","currentColor");const w=document.createElementNS("http://www.w3.org/2000/svg","use");w.setAttribute("href",`${nr}#${E.id}`),I.appendChild(w),S.appendChild(I),S.appendChild(W("span",{className:"sr-only",textContent:m}))}else{const E=W("span",{textContent:m});S.appendChild(E)}if(s.excludable?.includes(v)){const E=W("button",{type:"button",className:"exclude-filter-btn",dataset:{value:v,type:n},attributes:{"aria-label":`Excluir ${s.label} ${m}`},innerHTML:G.PAUSE_SMALL});S.appendChild(E)}h.appendChild(S)}),l.appendChild(h),ge=null,be=null};Object.keys(ne).forEach(t);const e=async()=>{try{const[n,s]=await Promise.all([ar(),sr()]);n&&n.length>0&&(ne.actor.items=n.reduce((o,l)=>({...o,[l]:l}),{}),t("actor")),s&&s.length>0&&(ne.director.items=s.reduce((o,l)=>({...o,[l]:l}),{}),t("director"))}catch{}};if("requestIdleCallback"in window?requestIdleCallback(e):setTimeout(e,500),b.toggleRotationBtn){const n=document.body.classList.contains("rotation-disabled");b.toggleRotationBtn.innerHTML=n?G.SQUARE_STOP:G.PAUSE,b.toggleRotationBtn.setAttribute("aria-label",n?"Activar rotación de tarjetas":"Pausar rotación de tarjetas"),b.toggleRotationBtn.title=n?"Giro automático":"Vista Rápida",b.toggleRotationBtn.setAttribute("aria-pressed",n)}ui(),ai(),vi(),si(),pi(),fi(),document.addEventListener("updateSidebarUI",()=>{b.sidebarFilterForms.forEach(n=>{const s=n.querySelector(X.SIDEBAR_FILTER_INPUT);s&&(s.value="")}),requestAnimationFrame(()=>{re()})}),document.addEventListener("filtersReset",bt),document.addEventListener("uiActionTriggered",bt),re()}export{N as closeMobileDrawer,bt as collapseAllSections,bi as initSidebar,Pt as openMobileDrawer};
