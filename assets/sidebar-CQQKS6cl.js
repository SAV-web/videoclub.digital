import{C as te,F as ie,L as mt,I as G,S as X,g as ue,a as B,c as W,b as nt,s as tr,f as rr,d as ir,e as gt,t as $,h as ge,i as Ue,j as nr,k as ar,l as sr,m as or,u as lr,n as at,o as le,p as Oe,q as _,r as cr,v as ur,w as fr,x as dr,y as hr}from"./index-CkGZ84jB.js";import{closeModal as pr}from"./modal-BlscOJyY.js";var J;(function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"})(J||(J={}));var U;(function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"})(U||(U={}));function vr(t){return be(t)&&typeof t.from=="function"}function be(t){return typeof t=="object"&&typeof t.to=="function"}function st(t){t.parentElement.removeChild(t)}function He(t){return t!=null}function ot(t){t.preventDefault()}function mr(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function gr(t,e){return Math.round(t/e)*e}function br(t,e){var n=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,l=bt(o);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(l.x=0),e?n.top+l.y-s.clientTop:n.left+l.x-s.clientLeft}function q(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function lt(t,e,n){n>0&&(F(t,e),setTimeout(function(){me(t,e)},n))}function ct(t){return Math.max(Math.min(t,100),0)}function Se(t){return Array.isArray(t)?t:[t]}function Sr(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function F(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function me(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function Er(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function bt(t){var e=window.pageXOffset!==void 0,n=(t.compatMode||"")==="CSS1Compat",o=e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,s=e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop;return{x:o,y:s}}function wr(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function Ar(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch{}return t}function Cr(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function Ne(t,e){return 100/(e-t)}function Be(t,e,n){return e*100/(t[n+1]-t[n])}function xr(t,e){return Be(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function yr(t,e){return e*(t[1]-t[0])/100+t[0]}function ce(t,e){for(var n=1;t>=e[n];)n+=1;return n}function Lr(t,e,n){if(n>=t.slice(-1)[0])return 100;var o=ce(n,t),s=t[o-1],l=t[o],c=e[o-1],p=e[o];return c+xr([s,l],n)/Ne(c,p)}function Dr(t,e,n){if(n>=100)return t.slice(-1)[0];var o=ce(n,e),s=t[o-1],l=t[o],c=e[o-1],p=e[o];return yr([s,l],(n-c)*Ne(c,p))}function Pr(t,e,n,o){if(o===100)return o;var s=ce(o,t),l=t[s-1],c=t[s];return n?o-l>(c-l)/2?c:l:e[s-1]?t[s-1]+gr(o-t[s-1],e[s-1]):o}var St=(function(){function t(e,n,o){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[o||!1],this.xNumSteps=[!1],this.snap=n;var s,l=[];for(Object.keys(e).forEach(function(c){l.push([Se(e[c]),c])}),l.sort(function(c,p){return c[0][0]-p[0][0]}),s=0;s<l.length;s++)this.handleEntryPoint(l[s][1],l[s][0]);for(this.xNumSteps=this.xSteps.slice(0),s=0;s<this.xNumSteps.length;s++)this.handleStepPoint(s,this.xNumSteps[s])}return t.prototype.getDistance=function(e){for(var n=[],o=0;o<this.xNumSteps.length-1;o++)n[o]=Be(this.xVal,e,o);return n},t.prototype.getAbsoluteDistance=function(e,n,o){var s=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[s+1];)s++;else e===this.xPct[this.xPct.length-1]&&(s=this.xPct.length-2);!o&&e===this.xPct[s+1]&&s++,n===null&&(n=[]);var l,c=1,p=n[s],v=0,m=0,S=0,E=0;for(o?l=(e-this.xPct[s])/(this.xPct[s+1]-this.xPct[s]):l=(this.xPct[s+1]-e)/(this.xPct[s+1]-this.xPct[s]);p>0;)v=this.xPct[s+1+E]-this.xPct[s+E],n[s+E]*c+100-l*100>100?(m=v*l,c=(p-100*l)/n[s+E],l=1):(m=n[s+E]*v/100*c,c=0),o?(S=S-m,this.xPct.length+E>=1&&E--):(S=S+m,this.xPct.length-E>=1&&E++),p=n[s+E]*c;return e+S},t.prototype.toStepping=function(e){return e=Lr(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return Dr(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=Pr(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,n,o){var s=ce(e,this.xPct);return(e===100||n&&e===this.xPct[s-1])&&(s=Math.max(s-1,1)),(this.xVal[s]-this.xVal[s-1])/o},t.prototype.getNearbySteps=function(e){var n=ce(e,this.xPct);return{stepBefore:{startValue:this.xVal[n-2],step:this.xNumSteps[n-2],highestStep:this.xHighestCompleteStep[n-2]},thisStep:{startValue:this.xVal[n-1],step:this.xNumSteps[n-1],highestStep:this.xHighestCompleteStep[n-1]},stepAfter:{startValue:this.xVal[n],step:this.xNumSteps[n],highestStep:this.xHighestCompleteStep[n]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(Sr);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,n){var o;if(e==="min"?o=0:e==="max"?o=100:o=parseFloat(e),!q(o)||!q(n[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(o),this.xVal.push(n[0]);var s=Number(n[1]);o?this.xSteps.push(isNaN(s)?!1:s):isNaN(s)||(this.xSteps[0]=s),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,n){if(n){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=Be([this.xVal[e],this.xVal[e+1]],n,0)/Ne(this.xPct[e],this.xPct[e+1]);var o=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],s=Math.ceil(Number(o.toFixed(3))-1),l=this.xVal[e]+this.xNumSteps[e]*s;this.xHighestCompleteStep[e]=l}},t})(),ut={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},Et={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},K={tooltips:".__tooltips",aria:".__aria"};function Mr(t,e){if(!q(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function Vr(t,e){if(!q(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function Rr(t,e){if(!q(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function Tr(t,e){if(!q(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function _r(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new St(e,t.snap||!1,t.singleStep)}function Ir(t,e){if(e=Se(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function kr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function Fr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function Ur(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function wt(t,e){var n=[!1],o;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(o=1;o<t.handles;o++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");n=e}t.connect=n}function Or(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function At(t,e){if(!q(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function Hr(t,e){if(!q(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function Br(t,e){var n;if(!q(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||q(e[0])||q(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],n=0;n<t.spectrum.xNumSteps.length-1;n++)if(t.padding[0][n]<0||t.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var o=e[0]+e[1],s=t.spectrum.xVal[0],l=t.spectrum.xVal[t.spectrum.xVal.length-1];if(o/(l-s)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Nr(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function qr(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,o=e.indexOf("drag")>=0,s=e.indexOf("fixed")>=0,l=e.indexOf("snap")>=0,c=e.indexOf("hover")>=0,p=e.indexOf("unconstrained")>=0,v=e.indexOf("invert-connects")>=0,m=e.indexOf("drag-all")>=0,S=e.indexOf("smooth-steps")>=0;if(s){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");At(t,t.start[1]-t.start[0])}if(v&&t.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(p&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:n||l,drag:o,dragAll:m,smoothSteps:S,fixed:s,snap:l,hover:c,unconstrained:p,invertConnects:v}}function zr(t,e){if(e!==!1)if(e===!0||be(e)){t.tooltips=[];for(var n=0;n<t.handles;n++)t.tooltips.push(e)}else{if(e=Se(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(o){if(typeof o!="boolean"&&!be(o))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function jr(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function Yr(t,e){if(!be(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function Xr(t,e){if(!vr(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function Wr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function $r(t,e){t.documentElement=e}function Gr(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function Kr(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(n){t.cssClasses[n]=t.cssPrefix+e[n]})):t.cssClasses=e}function Ct(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:ut,format:ut},n={step:{r:!1,t:Mr},keyboardPageMultiplier:{r:!1,t:Vr},keyboardMultiplier:{r:!1,t:Rr},keyboardDefaultStep:{r:!1,t:Tr},start:{r:!0,t:Ir},connect:{r:!0,t:wt},direction:{r:!0,t:Nr},snap:{r:!1,t:kr},animate:{r:!1,t:Fr},animationDuration:{r:!1,t:Ur},range:{r:!0,t:_r},orientation:{r:!1,t:Or},margin:{r:!1,t:At},limit:{r:!1,t:Hr},padding:{r:!1,t:Br},behaviour:{r:!0,t:qr},ariaFormat:{r:!1,t:Yr},format:{r:!1,t:Xr},tooltips:{r:!1,t:zr},keyboardSupport:{r:!0,t:Wr},documentElement:{r:!1,t:$r},cssPrefix:{r:!0,t:Gr},cssClasses:{r:!0,t:Kr},handleAttributes:{r:!1,t:jr}},o={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Et,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(n).forEach(function(v){if(!He(t[v])&&o[v]===void 0){if(n[v].r)throw new Error("noUiSlider: '"+v+"' is required.");return}n[v].t(e,He(t[v])?t[v]:o[v])}),e.pips=t.pips;var s=document.createElement("div"),l=s.style.msTransform!==void 0,c=s.style.transform!==void 0;e.transformRule=c?"transform":l?"msTransform":"webkitTransform";var p=[["left","top"],["right","bottom"]];return e.style=p[e.dir][e.ort],e}function Jr(t,e,n){var o=wr(),s=Cr(),l=s&&Ar(),c=t,p,v,m,S,E,I,w=e.spectrum,z=[],L=[],O=[],Ae=0,j={},ae=!1,re=t.ownerDocument,fe=e.documentElement||re.documentElement,de=re.body,Pt=re.dir==="rtl"||e.ort===1?0:100;function Y(r,i){var a=re.createElement("div");return i&&F(a,i),r.appendChild(a),a}function Mt(r,i){var a=Y(r,e.cssClasses.origin),u=Y(a,e.cssClasses.handle);if(Y(u,e.cssClasses.touchArea),u.setAttribute("data-handle",String(i)),e.keyboardSupport&&(u.setAttribute("tabindex","0"),u.addEventListener("keydown",function(d){return Yt(d,i)})),e.handleAttributes!==void 0){var f=e.handleAttributes[i];Object.keys(f).forEach(function(d){u.setAttribute(d,f[d])})}return u.setAttribute("role","slider"),u.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),i===0?F(u,e.cssClasses.handleLower):i===e.handles-1&&F(u,e.cssClasses.handleUpper),a.handle=u,a}function Ce(r,i){return i?Y(r,e.cssClasses.connect):!1}function Vt(r,i){v=Y(i,e.cssClasses.connects),m=[],S=[],S.push(Ce(v,r[0]));for(var a=0;a<e.handles;a++)m.push(Mt(i,a)),O[a]=a,S.push(Ce(v,r[a+1]))}function Rt(r){F(r,e.cssClasses.target),e.dir===0?F(r,e.cssClasses.ltr):F(r,e.cssClasses.rtl),e.ort===0?F(r,e.cssClasses.horizontal):F(r,e.cssClasses.vertical);var i=getComputedStyle(r).direction;return i==="rtl"?F(r,e.cssClasses.textDirectionRtl):F(r,e.cssClasses.textDirectionLtr),Y(r,e.cssClasses.base)}function Tt(r,i){return!e.tooltips||!e.tooltips[i]?!1:Y(r.firstChild,e.cssClasses.tooltip)}function ze(){return c.hasAttribute("disabled")}function xe(r){var i=m[r];return i.hasAttribute("disabled")}function _t(r){r!=null?(m[r].setAttribute("disabled",""),m[r].handle.removeAttribute("tabindex")):(c.setAttribute("disabled",""),m.forEach(function(i){i.handle.removeAttribute("tabindex")}))}function It(r){r!=null?(m[r].removeAttribute("disabled"),m[r].handle.setAttribute("tabindex","0")):(c.removeAttribute("disabled"),m.forEach(function(i){i.removeAttribute("disabled"),i.handle.setAttribute("tabindex","0")}))}function ye(){I&&(se("update"+K.tooltips),I.forEach(function(r){r&&st(r)}),I=null)}function je(){ye(),I=m.map(Tt),Ve("update"+K.tooltips,function(r,i,a){if(!(!I||!e.tooltips)&&I[i]!==!1){var u=r[i];e.tooltips[i]!==!0&&(u=e.tooltips[i].to(a[i])),I[i].innerHTML=u}})}function kt(){se("update"+K.aria),Ve("update"+K.aria,function(r,i,a,u,f){O.forEach(function(d){var g=m[d],h=he(L,d,0,!0,!0,!0),x=he(L,d,100,!0,!0,!0),y=f[d],D=String(e.ariaFormat.to(a[d]));h=w.fromStepping(h).toFixed(1),x=w.fromStepping(x).toFixed(1),y=w.fromStepping(y).toFixed(1),g.children[0].setAttribute("aria-valuemin",h),g.children[0].setAttribute("aria-valuemax",x),g.children[0].setAttribute("aria-valuenow",y),g.children[0].setAttribute("aria-valuetext",D)})})}function Ft(r){if(r.mode===J.Range||r.mode===J.Steps)return w.xVal;if(r.mode===J.Count){if(r.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var i=r.values-1,a=100/i,u=[];i--;)u[i]=i*a;return u.push(100),Ye(u,r.stepped)}return r.mode===J.Positions?Ye(r.values,r.stepped):r.mode===J.Values?r.stepped?r.values.map(function(f){return w.fromStepping(w.getStep(w.toStepping(f)))}):r.values:[]}function Ye(r,i){return r.map(function(a){return w.fromStepping(i?w.getStep(a):a)})}function Ut(r){function i(y,D){return Number((y+D).toFixed(7))}var a=Ft(r),u={},f=w.xVal[0],d=w.xVal[w.xVal.length-1],g=!1,h=!1,x=0;return a=mr(a.slice().sort(function(y,D){return y-D})),a[0]!==f&&(a.unshift(f),g=!0),a[a.length-1]!==d&&(a.push(d),h=!0),a.forEach(function(y,D){var P,C,V,k=y,R=a[D+1],T,_e,Ie,ke,tt,Fe,rt,it=r.mode===J.Steps;for(it&&(P=w.xNumSteps[D]),P||(P=R-k),R===void 0&&(R=k),P=Math.max(P,1e-7),C=k;C<=R;C=i(C,P)){for(T=w.toStepping(C),_e=T-x,tt=_e/(r.density||1),Fe=Math.round(tt),rt=_e/Fe,V=1;V<=Fe;V+=1)Ie=x+V*rt,u[Ie.toFixed(5)]=[w.fromStepping(Ie),0];ke=a.indexOf(C)>-1?U.LargeValue:it?U.SmallValue:U.NoValue,!D&&g&&C!==R&&(ke=0),C===R&&h||(u[T.toFixed(5)]=[C,ke]),x=T}}),u}function Ot(r,i,a){var u,f,d=re.createElement("div"),g=(u={},u[U.None]="",u[U.NoValue]=e.cssClasses.valueNormal,u[U.LargeValue]=e.cssClasses.valueLarge,u[U.SmallValue]=e.cssClasses.valueSub,u),h=(f={},f[U.None]="",f[U.NoValue]=e.cssClasses.markerNormal,f[U.LargeValue]=e.cssClasses.markerLarge,f[U.SmallValue]=e.cssClasses.markerSub,f),x=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],y=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];F(d,e.cssClasses.pips),F(d,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function D(C,V){var k=V===e.cssClasses.value,R=k?x:y,T=k?g:h;return V+" "+R[e.ort]+" "+T[C]}function P(C,V,k){if(k=i?i(V,k):k,k!==U.None){var R=Y(d,!1);R.className=D(k,e.cssClasses.marker),R.style[e.style]=C+"%",k>U.NoValue&&(R=Y(d,!1),R.className=D(k,e.cssClasses.value),R.setAttribute("data-value",String(V)),R.style[e.style]=C+"%",R.innerHTML=String(a.to(V)))}}return Object.keys(r).forEach(function(C){P(C,r[C][0],r[C][1])}),d}function Le(){E&&(st(E),E=null)}function De(r){Le();var i=Ut(r),a=r.filter,u=r.format||{to:function(f){return String(Math.round(f))}};return E=c.appendChild(Ot(i,a,u)),E}function Xe(){var r=p.getBoundingClientRect(),i="offset"+["Width","Height"][e.ort];return e.ort===0?r.width||p[i]:r.height||p[i]}function Z(r,i,a,u){var f=function(g){var h=Ht(g,u.pageOffset,u.target||i);if(!h||ze()&&!u.doNotReject||Er(c,e.cssClasses.tap)&&!u.doNotReject||r===o.start&&h.buttons!==void 0&&h.buttons>1||u.hover&&h.buttons)return!1;l||h.preventDefault(),h.calcPoint=h.points[e.ort],a(h,u)},d=[];return r.split(" ").forEach(function(g){i.addEventListener(g,f,l?{passive:!0}:!1),d.push([g,f])}),d}function Ht(r,i,a){var u=r.type.indexOf("touch")===0,f=r.type.indexOf("mouse")===0,d=r.type.indexOf("pointer")===0,g=0,h=0;if(r.type.indexOf("MSPointer")===0&&(d=!0),r.type==="mousedown"&&!r.buttons&&!r.touches)return!1;if(u){var x=function(P){var C=P.target;return C===a||a.contains(C)||r.composed&&r.composedPath().shift()===a};if(r.type==="touchstart"){var y=Array.prototype.filter.call(r.touches,x);if(y.length>1)return!1;g=y[0].pageX,h=y[0].pageY}else{var D=Array.prototype.find.call(r.changedTouches,x);if(!D)return!1;g=D.pageX,h=D.pageY}}return i=i||bt(re),(f||d)&&(g=r.clientX+i.x,h=r.clientY+i.y),r.pageOffset=i,r.points=[g,h],r.cursor=f||d,r}function We(r){var i=r-br(p,e.ort),a=i*100/Xe();return a=ct(a),e.dir?100-a:a}function Bt(r){var i=100,a=!1;return m.forEach(function(u,f){if(!xe(f)){var d=L[f],g=Math.abs(d-r),h=g===100&&i===100,x=g<i,y=g<=i&&r>d;(x||y||h)&&(a=f,i=g)}}),a}function Nt(r,i){r.type==="mouseout"&&r.target.nodeName==="HTML"&&r.relatedTarget===null&&Pe(r,i)}function qt(r,i){if(navigator.appVersion.indexOf("MSIE 9")===-1&&r.buttons===0&&i.buttonsProperty!==0)return Pe(r,i);var a=(e.dir?-1:1)*(r.calcPoint-i.startCalcPoint),u=a*100/i.baseSize;Ge(a>0,u,i.locations,i.handleNumbers,i.connect)}function Pe(r,i){i.handle&&(me(i.handle,e.cssClasses.active),Ae-=1),i.listeners.forEach(function(a){fe.removeEventListener(a[0],a[1])}),Ae===0&&(me(c,e.cssClasses.drag),Te(),r.cursor&&(de.style.cursor="",de.removeEventListener("selectstart",ot))),e.events.smoothSteps&&(i.handleNumbers.forEach(function(a){ee(a,L[a],!0,!0,!1,!1)}),i.handleNumbers.forEach(function(a){M("update",a)})),i.handleNumbers.forEach(function(a){M("change",a),M("set",a),M("end",a)})}function Me(r,i){if(!i.handleNumbers.some(xe)){var a;if(i.handleNumbers.length===1){var u=m[i.handleNumbers[0]];a=u.children[0],Ae+=1,F(a,e.cssClasses.active)}r.stopPropagation();var f=[],d=Z(o.move,fe,qt,{target:r.target,handle:a,connect:i.connect,listeners:f,startCalcPoint:r.calcPoint,baseSize:Xe(),pageOffset:r.pageOffset,handleNumbers:i.handleNumbers,buttonsProperty:r.buttons,locations:L.slice()}),g=Z(o.end,fe,Pe,{target:r.target,handle:a,listeners:f,doNotReject:!0,handleNumbers:i.handleNumbers}),h=Z("mouseout",fe,Nt,{target:r.target,handle:a,listeners:f,doNotReject:!0,handleNumbers:i.handleNumbers});f.push.apply(f,d.concat(g,h)),r.cursor&&(de.style.cursor=getComputedStyle(r.target).cursor,m.length>1&&F(c,e.cssClasses.drag),de.addEventListener("selectstart",ot,!1)),i.handleNumbers.forEach(function(x){M("start",x)})}}function zt(r){r.stopPropagation();var i=We(r.calcPoint),a=Bt(i);a!==!1&&(e.events.snap||lt(c,e.cssClasses.tap,e.animationDuration),ee(a,i,!0,!0),Te(),M("slide",a,!0),M("update",a,!0),e.events.snap?Me(r,{handleNumbers:[a]}):(M("change",a,!0),M("set",a,!0)))}function jt(r){var i=We(r.calcPoint),a=w.getStep(i),u=w.fromStepping(a);Object.keys(j).forEach(function(f){f.split(".")[0]==="hover"&&j[f].forEach(function(d){d.call(ve,u)})})}function Yt(r,i){if(ze()||xe(i))return!1;var a=["Left","Right"],u=["Down","Up"],f=["PageDown","PageUp"],d=["Home","End"];e.dir&&!e.ort?a.reverse():e.ort&&!e.dir&&(u.reverse(),f.reverse());var g=r.key.replace("Arrow",""),h=g===f[0],x=g===f[1],y=g===u[0]||g===a[0]||h,D=g===u[1]||g===a[1]||x,P=g===d[0],C=g===d[1];if(!y&&!D&&!P&&!C)return!0;r.preventDefault();var V;if(D||y){var k=y?0:1,R=Ze(i),T=R[k];if(T===null)return!1;T===!1&&(T=w.getDefaultStep(L[i],y,e.keyboardDefaultStep)),x||h?T*=e.keyboardPageMultiplier:T*=e.keyboardMultiplier,T=Math.max(T,1e-7),T=(y?-1:1)*T,V=z[i]+T}else C?V=e.spectrum.xVal[e.spectrum.xVal.length-1]:V=e.spectrum.xVal[0];return ee(i,w.toStepping(V),!0,!0),M("slide",i),M("update",i),M("change",i),M("set",i),!1}function $e(r){r.fixed||m.forEach(function(i,a){Z(o.start,i.children[0],Me,{handleNumbers:[a]})}),r.tap&&Z(o.start,p,zt,{}),r.hover&&Z(o.move,p,jt,{hover:!0}),r.drag&&S.forEach(function(i,a){if(!(i===!1||a===0||a===S.length-1)){var u=m[a-1],f=m[a],d=[i],g=[u,f],h=[a-1,a];F(i,e.cssClasses.draggable),r.fixed&&(d.push(u.children[0]),d.push(f.children[0])),r.dragAll&&(g=m,h=O),d.forEach(function(x){Z(o.start,x,Me,{handles:g,handleNumbers:h,connect:i})})}})}function Ve(r,i){j[r]=j[r]||[],j[r].push(i),r.split(".")[0]==="update"&&m.forEach(function(a,u){M("update",u)})}function Xt(r){return r===K.aria||r===K.tooltips}function se(r){var i=r&&r.split(".")[0],a=i?r.substring(i.length):r;Object.keys(j).forEach(function(u){var f=u.split(".")[0],d=u.substring(f.length);(!i||i===f)&&(!a||a===d)&&(!Xt(d)||a===d)&&delete j[u]})}function M(r,i,a){Object.keys(j).forEach(function(u){var f=u.split(".")[0];r===f&&j[u].forEach(function(d){d.call(ve,z.map(e.format.to),i,z.slice(),a||!1,L.slice(),ve)})})}function he(r,i,a,u,f,d,g){var h;return m.length>1&&!e.events.unconstrained&&(u&&i>0&&(h=w.getAbsoluteDistance(r[i-1],e.margin,!1),a=Math.max(a,h)),f&&i<m.length-1&&(h=w.getAbsoluteDistance(r[i+1],e.margin,!0),a=Math.min(a,h))),m.length>1&&e.limit&&(u&&i>0&&(h=w.getAbsoluteDistance(r[i-1],e.limit,!1),a=Math.min(a,h)),f&&i<m.length-1&&(h=w.getAbsoluteDistance(r[i+1],e.limit,!0),a=Math.max(a,h))),e.padding&&(i===0&&(h=w.getAbsoluteDistance(0,e.padding[0],!1),a=Math.max(a,h)),i===m.length-1&&(h=w.getAbsoluteDistance(100,e.padding[1],!0),a=Math.min(a,h))),g||(a=w.getStep(a)),a=ct(a),a===r[i]&&!d?!1:a}function Re(r,i){var a=e.ort;return(a?i:r)+", "+(a?r:i)}function Ge(r,i,a,u,f){var d=a.slice(),g=u[0],h=e.events.smoothSteps,x=[!r,r],y=[r,!r];u=u.slice(),r&&u.reverse(),u.length>1?u.forEach(function(P,C){var V=he(d,P,d[P]+i,x[C],y[C],!1,h);V===!1?i=0:(i=V-d[P],d[P]=V)}):x=y=[!0];var D=!1;u.forEach(function(P,C){D=ee(P,a[P]+i,x[C],y[C],!1,h)||D}),D&&(u.forEach(function(P){M("update",P),M("slide",P)}),f!=null&&M("drag",g))}function Ke(r,i){return e.dir?100-r-i:r}function Wt(r,i){L[r]=i,z[r]=w.fromStepping(i);var a=Ke(i,0)-Pt,u="translate("+Re(a+"%","0")+")";if(m[r].style[e.transformRule]=u,e.events.invertConnects&&L.length>1){var f=L.every(function(d,g,h){return g===0||d>=h[g-1]});if(ae!==!f){Zt();return}}oe(r),oe(r+1),ae&&(oe(r-1),oe(r+2))}function Te(){O.forEach(function(r){var i=L[r]>50?-1:1,a=3+(m.length+i*r);m[r].style.zIndex=String(a)})}function ee(r,i,a,u,f,d){return f||(i=he(L,r,i,a,u,!1,d)),i===!1?!1:(Wt(r,i),!0)}function oe(r){if(S[r]){var i=L.slice();ae&&i.sort(function(h,x){return h-x});var a=0,u=100;r!==0&&(a=i[r-1]),r!==S.length-1&&(u=i[r]);var f=u-a,d="translate("+Re(Ke(a,f)+"%","0")+")",g="scale("+Re(f/100,"1")+")";S[r].style[e.transformRule]=d+" "+g}}function Je(r,i){return r===null||r===!1||r===void 0||(typeof r=="number"&&(r=String(r)),r=e.format.from(r),r!==!1&&(r=w.toStepping(r)),r===!1||isNaN(r))?L[i]:r}function pe(r,i,a){var u=Se(r),f=L[0]===void 0;i=i===void 0?!0:i,e.animate&&!f&&lt(c,e.cssClasses.tap,e.animationDuration),O.forEach(function(h){ee(h,Je(u[h],h),!0,!1,a)});var d=O.length===1?0:1;if(f&&w.hasNoSize()&&(a=!0,L[0]=0,O.length>1)){var g=100/(O.length-1);O.forEach(function(h){L[h]=h*g})}for(;d<O.length;++d)O.forEach(function(h){ee(h,L[h],!0,!0,a)});Te(),O.forEach(function(h){M("update",h),u[h]!==null&&i&&M("set",h)})}function $t(r){pe(e.start,r)}function Gt(r,i,a,u){if(r=Number(r),!(r>=0&&r<O.length))throw new Error("noUiSlider: invalid handle number, got: "+r);ee(r,Je(i,r),!0,!0,u),M("update",r),a&&M("set",r)}function Qe(r){if(r===void 0&&(r=!1),r)return z.length===1?z[0]:z.slice(0);var i=z.map(e.format.to);return i.length===1?i[0]:i}function Kt(){for(se(K.aria),se(K.tooltips),Object.keys(e.cssClasses).forEach(function(r){me(c,e.cssClasses[r])});c.firstChild;)c.removeChild(c.firstChild);delete c.noUiSlider}function Ze(r){var i=L[r],a=w.getNearbySteps(i),u=z[r],f=a.thisStep.step,d=null;if(e.snap)return[u-a.stepBefore.startValue||null,a.stepAfter.startValue-u||null];f!==!1&&u+f>a.stepAfter.startValue&&(f=a.stepAfter.startValue-u),u>a.thisStep.startValue?d=a.thisStep.step:a.stepBefore.step===!1?d=!1:d=u-a.stepBefore.highestStep,i===100?f=null:i===0&&(d=null);var g=w.countStepDecimals();return f!==null&&f!==!1&&(f=Number(f.toFixed(g))),d!==null&&d!==!1&&(d=Number(d.toFixed(g))),[d,f]}function Jt(){return O.map(Ze)}function Qt(r,i){var a=Qe(),u=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];u.forEach(function(d){r[d]!==void 0&&(n[d]=r[d])});var f=Ct(n);u.forEach(function(d){r[d]!==void 0&&(e[d]=f[d])}),w=f.spectrum,e.margin=f.margin,e.limit=f.limit,e.padding=f.padding,e.pips?De(e.pips):Le(),e.tooltips?je():ye(),L=[],pe(He(r.start)?r.start:a,i),r.connect&&et()}function et(){for(;v.firstChild;)v.removeChild(v.firstChild);for(var r=0;r<=e.handles;r++)S[r]=Ce(v,e.connect[r]),oe(r);$e({drag:e.events.drag,fixed:!0})}function Zt(){ae=!ae,wt(e,e.connect.map(function(r){return!r})),et()}function er(){p=Rt(c),Vt(e.connect,p),$e(e.events),pe(e.start),e.pips&&De(e.pips),e.tooltips&&je(),kt()}er();var ve={destroy:Kt,steps:Jt,on:Ve,off:se,get:Qe,set:pe,setHandle:Gt,reset:$t,disable:_t,enable:It,__moveHandles:function(r,i,a){Ge(r,i,L,a)},options:n,updateOptions:Qt,target:c,removePips:Le,removeTooltips:ye,getPositions:function(){return L.slice()},getTooltips:function(){return I},getOrigins:function(){return m},pips:De};return ve}function Qr(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var n=Ct(e),o=Jr(t,n,e);return t.noUiSlider=o,o}const Zr={__spectrum:St,cssClasses:Et,create:Qr},H=768,ft=.4;let Q=280;const b={sidebar:document.getElementById("sidebar"),sidebarInnerWrapper:document.querySelector(".sidebar-inner-wrapper"),rewindButton:document.querySelector("#rewind-button"),toggleRotationBtn:document.querySelector("#toggle-rotation-btn"),playButton:document.querySelector("#play-button"),collapsibleSections:document.querySelectorAll(".collapsible-section"),sidebarFilterForms:document.querySelectorAll(X.SIDEBAR_FILTER_FORM),sidebarScrollable:document.querySelector(".sidebar-scrollable-filters"),yearSlider:document.querySelector(X.YEAR_SLIDER),yearStartInput:document.querySelector(X.YEAR_START_INPUT),yearEndInput:document.querySelector(X.YEAR_END_INPUT),sidebarOverlay:document.getElementById("sidebar-overlay"),mainContent:document.querySelector(".main-content-wrapper")},xt={};let A={isDragging:!1,isHorizontalDrag:!1,startX:0,startY:0,startTime:0,currentTranslate:0,startTranslate:0,isInteractive:!1};const yt=()=>{document.body.classList.add("sidebar-is-open"),b.sidebar.style.transform="",A.currentTranslate=0,Ee(!0)},N=()=>{document.body.classList.remove("sidebar-is-open"),b.sidebar.style.transform="",A.currentTranslate=-Q,Ee(!1)};function dt(){if(b.sidebar){const t=b.sidebar.offsetWidth;t>0&&(Q=t)}}function ei(t){if(window.innerWidth>H||document.body.classList.contains("modal-open"))return;const e=document.body.classList.contains("sidebar-is-open");if(!(e&&t.target.closest("#sidebar")||!e&&t.touches[0].clientX<150)){A.isDragging=!1;return}A.isDragging=!0,A.isHorizontalDrag=!1,A.startX=t.touches[0].clientX,A.startY=t.touches[0].clientY,A.startTime=Date.now(),A.startTranslate=e?0:-Q,A.isInteractive=!e&&!!t.target.closest("button, a, input, select, textarea, .movie-card, .noUi-handle"),document.addEventListener("touchmove",qe,{passive:!1})}function qe(t){if(!A.isDragging)return;const e=t.touches[0].clientX,n=t.touches[0].clientY,o=e-A.startX,s=n-A.startY;if(!A.isHorizontalDrag){const c=A.isInteractive?15:5;if(Math.abs(o)<c&&Math.abs(s)<c)return;if(Math.abs(s)>Math.abs(o)){A.isDragging=!1,document.removeEventListener("touchmove",qe);return}A.isHorizontalDrag=!0,A.startX=e,A.startY=n,A.startTime=Date.now(),b.sidebar.classList.add("is-dragging"),document.body.classList.add("sidebar-is-dragging")}t.cancelable&&t.preventDefault();let l=A.startTranslate+(e-A.startX);if(l>0)l*=.2;else if(l<-Q){const c=Math.abs(l+Q);l=-Q-c*.2}A.currentTranslate=l,b.sidebar.style.transform=`translateX(${A.currentTranslate}px)`}function ti(t){if(!A.isDragging)return;if(document.removeEventListener("touchmove",qe),!A.isHorizontalDrag){A.isDragging=!1;return}A.isDragging=!1,A.isHorizontalDrag=!1,b.sidebar.classList.remove("is-dragging"),document.body.classList.remove("sidebar-is-dragging");const e=Date.now()-A.startTime,o=t.changedTouches[0].clientX-A.startX,s=e>0?o/e:0;let l;s>ft?l=!0:s<-ft?l=!1:l=A.currentTranslate>-Q*.5,l?yt():N()}function Ee(t){if(!b.rewindButton)return;b.rewindButton.innerHTML=t?G.REWIND:G.FORWARD,b.rewindButton.setAttribute("aria-label",t?"Contraer sidebar":"Expandir sidebar"),b.rewindButton.setAttribute("aria-expanded",t);const e=document.getElementById("mobile-sidebar-toggle");e&&(e.setAttribute("aria-expanded",String(t)),e.setAttribute("aria-label",t?"Cerrar menú de filtros":"Abrir menú de filtros"))}function ri(){b.sidebar&&(dt(),document.addEventListener("touchstart",ei,{passive:!0}),document.addEventListener("touchend",ti,{passive:!0}),window.addEventListener("resize",()=>{window.innerWidth<=H&&dt(),window.innerWidth>H&&(document.body.classList.remove("sidebar-is-open"),b.sidebar.style.transform="",A.currentTranslate=-Q)}))}function Lt(t=null){const e=b.toggleRotationBtn;if(!e)return;const n=document.body.classList.contains("rotation-disabled"),o=t!==null?t:!n;if(n===o)return;$("medium"),lr(),pr();const s=()=>{document.body.classList.toggle("rotation-disabled",o),e.innerHTML=o?G.SQUARE_STOP:G.PAUSE,e.setAttribute("aria-label",o?"Activar rotación de tarjetas":"Pausar rotación de tarjetas"),e.title=o?"Giro automático":"Vista Rápida",e.setAttribute("aria-pressed",o),mt.set("rotationState",o?"disabled":"enabled")};document.startViewTransition?document.startViewTransition(()=>s()):s(),ge(e)}function ii(){const t=document.querySelector(".main-content-wrapper");if(!t)return;window.addEventListener("click",c=>{document.body.dataset.gestureCooldown==="true"&&c.target.closest(".movie-card, .grid-container")&&(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation())},{capture:!0});let e=null,n=!1,o=!1,s=null;const l=()=>{document.body.dataset.gestureCooldown="true",s&&clearTimeout(s),s=setTimeout(()=>{delete document.body.dataset.gestureCooldown,s=null},800)};t.addEventListener("touchstart",c=>{c.touches.length===2&&(n=!0,o=!1,e=Math.hypot(c.touches[0].pageX-c.touches[1].pageX,c.touches[0].pageY-c.touches[1].pageY))},{passive:!0}),t.addEventListener("touchmove",c=>{if(!n||c.touches.length!==2||e===null)return;if(o){l();return}const v=Math.hypot(c.touches[0].pageX-c.touches[1].pageX,c.touches[0].pageY-c.touches[1].pageY)-e;Math.abs(v)>60&&v<0&&(Lt(),l(),o=!0)},{passive:!0}),t.addEventListener("touchend",c=>{o&&l(),c.touches.length<2&&(n=!1,e=null),c.touches.length===0&&(o=!1)})}function ni(t,e,n){const o=t.querySelector(X.SIDEBAR_FILTER_INPUT);let s=t.querySelector(X.SIDEBAR_AUTOCOMPLETE_RESULTS);if(s||(s=W("div",{className:"sidebar-autocomplete-results"}),t.appendChild(s)),s.textContent="",e.length===0){o.setAttribute("aria-expanded","false"),o.removeAttribute("aria-activedescendant"),o.removeAttribute("aria-controls"),s.remove();return}s.id=`autocomplete-results-${t.dataset.filterType}`,s.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-controls",s.id);const l=document.createDocumentFragment();e.forEach((c,p)=>{const v=W("div",{className:te.SIDEBAR_AUTOCOMPLETE_ITEM,dataset:{value:c},id:`suggestion-item-${t.dataset.filterType}-${p}`,attributes:{role:"option"}});v.appendChild(dr(c,n)),l.appendChild(v)}),s.appendChild(l)}function ai(){const t=ue(),n=hr()>=B.MAX_ACTIVE_FILTERS;document.querySelectorAll(".filter-link").forEach(s=>{const l=s.dataset.filterType,c=s.dataset.filterValue,p=l==="genre"&&t.excludedGenres?.includes(c)||l==="country"&&t.excludedCountries?.includes(c),m=t[l]===c||p;if(s.style.display!==(m?"none":"flex")&&(s.style.display=m?"none":"flex"),!m){const E=n;s.hasAttribute("disabled")!==E&&(s.toggleAttribute("disabled",E),s.style.pointerEvents=E?"none":"auto",s.style.opacity=E?"0.5":"1")}const S=s.querySelector(".exclude-filter-btn");if(S){const E=l==="country"&&t.country;S.style.display!==(E?"none":"")&&(S.style.display=E?"none":"")}}),document.querySelectorAll(".sidebar-filter-input").forEach(s=>{s.disabled!==n&&(s.disabled=n,s.placeholder=n?"Límite de filtros":`Otro ${s.closest("form").dataset.filterType}...`)})}let ht={};function ne(){const t=ue();let e=0;const n=(s,l,c=!1,p=0)=>{const v=W("div",{className:`filter-pill ${c?"filter-pill--exclude":""}`,dataset:{filterType:s,filterValue:l}});v.style.setProperty("--pill-index",p);const m=ie[s]?.items[l]||l;return v.appendChild(W("span",{textContent:m})),v.appendChild(W("span",{className:"remove-filter-btn",innerHTML:c?G.PAUSE_SMALL:"×",attributes:{"aria-hidden":"true"}})),v},o=s=>{const l=xt[s];if(!l)return;const c=t[s];let p=[];s==="genre"?p=t.excludedGenres||[]:s==="country"&&(p=t.excludedCountries||[]);const v=`${s}-combined`,m=JSON.stringify({inc:c,exc:p});if(ht[v]===m){c&&e++,e+=p.length;return}ht[v]=m,l.textContent="",c&&l.appendChild(n(s,c,!1,e++)),p.forEach(S=>{l.appendChild(n(s,S,!0,e++))})};Object.keys(ie).forEach(s=>o(s)),ai()}async function we(t,e,n=!1){const o=ue();if(e&&(t==="actor"||t==="director")){const c=o.sort,p=o.mediaType;cr(),ur(c),fr(p),_(t,e,!0),document.dispatchEvent(new CustomEvent("updateSidebarUI")),ne(),document.dispatchEvent(new CustomEvent("uiActionTriggered"));try{await Oe(1)}catch(v){v.name!=="AbortError"&&le("Error al cargar filmografía.","error")}return}e&&(t==="selection"&&o.studio?_("studio",null):t==="studio"&&o.selection&&_("selection",null));const l=n||o[t]!==e?e:null;if(l&&t!=="actor"&&t!=="director"&&(o.actor&&_("actor",null),o.director&&_("director",null)),l&&t==="country"&&_("excludedCountries",[],!0),!_(t,l)){le(`Límite de ${B.MAX_ACTIVE_FILTERS} filtros alcanzado.`,"error"),t==="selection"&&o.studio&&_("studio",o.studio),t==="studio"&&o.selection&&_("selection",o.selection);return}ne(),document.dispatchEvent(new CustomEvent("uiActionTriggered"));try{await Oe(1)}catch(c){if(c.name==="AbortError")return;console.error("Fallo al aplicar filtro:",c),le("No se pudo aplicar el filtro.","error"),_("selection",o.selection),_("studio",o.studio),_("actor",o.actor),_("director",o.director),_("excludedCountries",o.excludedCountries,!0),_(t,o[t]),ne()}}async function Dt(t,e){const n=ue();if(!(t==="country"&&n.country)){if(!at(t,e)){le("Límite de filtros alcanzado.","error");return}ne(),document.dispatchEvent(new CustomEvent("uiActionTriggered"));try{await Oe(1)}catch(o){if(o.name==="AbortError")return;le("No se pudo aplicar el filtro de exclusión.","error"),at(t,e),_("country",n.country),_("genre",n.genre),ne()}}}function si(){b.playButton&&ge(b.playButton),$("medium"),document.dispatchEvent(new CustomEvent("filtersReset")),window.innerWidth<=H&&N()}function pt(){b.collapsibleSections.forEach(t=>{t.classList.remove(te.ACTIVE),t.querySelector(".section-header")?.setAttribute("aria-expanded","false")}),b.sidebarInnerWrapper&&b.sidebarInnerWrapper.classList.remove("is-compact")}function oi(){if(!b.yearSlider||!b.yearStartInput||!b.yearEndInput)return;const t=[b.yearStartInput,b.yearEndInput],e=Zr.create(b.yearSlider,{start:[B.YEAR_MIN,B.YEAR_MAX],connect:!0,step:1,range:{min:B.YEAR_MIN,max:B.YEAR_MAX},format:{to:s=>Math.round(s),from:s=>Number(s)}});e.on("update",(s,l)=>{t[l].value=s[l]});const o=gt((s,l)=>{let[c,p]=s.map(Number);c>p&&(l===0?p=c:c=p);const v=`${c}-${p}`;we("year",v,!0),window.innerWidth<=H&&N()},500);e.on("set",o),t.forEach((s,l)=>{s.addEventListener("change",c=>{const p=parseFloat(c.target.value),v=e.get().map(S=>parseFloat(S));if(v[0]===v[1]){if(l===0&&p>v[0]){e.set([p,p]);return}if(l===1&&p<v[1]){e.set([p,p]);return}}const m=[null,null];m[l]=c.target.value,e.set(m)})})}function li(){document.querySelectorAll(".year-input-wrapper").forEach(t=>{const e=t.querySelector(".year-input"),n=t.querySelector(".stepper-btn.stepper-up"),o=t.querySelector(".stepper-btn.stepper-down");if(!e||!n||!o)return;const s=l=>{$("light");let c=parseInt(e.value,10);isNaN(c)&&(c=l>0?B.YEAR_MIN:B.YEAR_MAX);const p=Math.min(Math.max(c+l,B.YEAR_MIN),B.YEAR_MAX);e.value=p,e.dispatchEvent(new Event("change",{bubbles:!0}))};n.addEventListener("click",()=>s(1)),o.addEventListener("click",()=>s(-1))})}const ci={genre:or,director:sr,actor:ar,country:nr};function ui(){b.sidebarFilterForms.forEach(t=>{const e=t.querySelector(X.SIDEBAR_FILTER_INPUT),n=t.dataset.filterType,o=ci[n];if(!e||!o)return;e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-expanded","false");const s=gt(async()=>{const l=e.value;if(l.length<3){Ue(t);return}const c=await o(l);ni(t,c,l)},B.SEARCH_DEBOUNCE_DELAY);e.addEventListener("input",s),e.addEventListener("keydown",l=>{const c=t.querySelector(X.SIDEBAR_AUTOCOMPLETE_RESULTS);if(!c||c.children.length===0)return;const p=Array.from(c.children);let v=p.findIndex(S=>S.classList.contains("is-active"));const m=S=>{p.forEach(E=>E.classList.remove("is-active")),S>=0&&p[S]?(p[S].classList.add("is-active"),e.setAttribute("aria-activedescendant",p[S].id)):e.removeAttribute("aria-activedescendant")};switch(l.key){case"ArrowDown":l.preventDefault(),v=Math.min(v+1,p.length-1),m(v);break;case"ArrowUp":l.preventDefault(),v=Math.max(v-1,-1),m(v);break;case"Enter":l.preventDefault(),v>=0&&p[v]&&p[v].click();break;case"Escape":l.preventDefault(),Ue();break}}),t.addEventListener("click",l=>{const c=l.target.closest(`.${te.SIDEBAR_AUTOCOMPLETE_ITEM}`);c&&($("light"),we(n,c.dataset.value),e.value="",Ue(),window.innerWidth<=H&&N())})})}function vt(t){const e=t.target.closest(".filter-pill");if(!e)return!1;$("medium");const{filterType:n,filterValue:o}=e.dataset;return e.classList.add("is-removing"),e.addEventListener("animationend",()=>{e.classList.contains("filter-pill--exclude")?Dt(n,o):we(n,null)},{once:!0}),!0}function fi(){document.querySelectorAll(".collapsible-section .section-header").forEach(e=>{const n=document.createElement("div");n.innerHTML=G.CHEVRON_RIGHT,n.firstChild&&e.appendChild(n.firstChild)});const t=document.querySelector(".sidebar-static-filters");t&&t.addEventListener("click",e=>{vt(e)&&window.innerWidth<=H&&N()}),b.rewindButton&&b.rewindButton.addEventListener("click",e=>{if($("light"),window.innerWidth<=H)document.body.classList.contains("sidebar-is-open")?N():yt();else{document.body.classList.toggle("sidebar-collapsed");const o=document.body.classList.contains("sidebar-collapsed");Ee(!o)}}),b.sidebarOverlay&&b.sidebarOverlay.addEventListener("click",N),b.toggleRotationBtn&&b.toggleRotationBtn.addEventListener("click",e=>{Lt(),window.innerWidth<=H&&N()}),b.sidebarScrollable&&b.sidebarScrollable.addEventListener("click",e=>{const n=e.target.closest(".exclude-filter-btn");if(n){e.stopPropagation(),$("medium"),ge(n),Dt(n.dataset.type,n.dataset.value),window.innerWidth<=H&&N();return}if(vt(e)){window.innerWidth<=H&&N();return}const o=e.target.closest(".filter-link");o&&!o.hasAttribute("disabled")&&($("light"),ge(o),we(o.dataset.filterType,o.dataset.filterValue),window.innerWidth<=H&&N())}),b.playButton&&b.playButton.addEventListener("click",si),b.collapsibleSections.forEach(e=>{const n=e.querySelector(".section-header");n?.addEventListener("click",()=>{$("light");const s=!e.classList.contains(te.ACTIVE);b.collapsibleSections.forEach(l=>{l!==e&&(l.classList.remove(te.ACTIVE),l.querySelector(".section-header")?.setAttribute("aria-expanded","false"))}),e.classList.toggle(te.ACTIVE,s),n.setAttribute("aria-expanded",s),b.sidebarInnerWrapper?.classList.toggle("is-compact",s),s&&setTimeout(()=>{e.classList.contains(te.ACTIVE)&&n&&n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},300)})})}function pi(){window.innerWidth<=H&&Ee(!1);const t=n=>{const o=ie[n];if(!o)return;const s=n==="country"?"countries-content":`${n}s-content`,l=document.querySelector(`#${s} > div:first-child`);if(!l)return;const c=l.closest(".collapsible-section").querySelector(".active-filters-list");c&&(xt[n]=c),l.textContent="";const p=document.createDocumentFragment();Object.entries(o.items).forEach(([v,m])=>{const S=W("button",{type:"button",className:"filter-link",dataset:{filterType:n,filterValue:v}});if(n==="studio"&&nt[v]){const E=nt[v];S.classList.add("filter-link--studio"),S.title=m;const I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.setAttribute("width",E.w||"24"),I.setAttribute("height",E.h||"24"),I.setAttribute("viewBox",E.vb||"0 0 24 24"),I.setAttribute("class",`sidebar-platform-icon ${E.class||""}`),I.setAttribute("fill","currentColor");const w=document.createElementNS("http://www.w3.org/2000/svg","use");w.setAttribute("href",`${tr}#${E.id}`),I.appendChild(w),S.appendChild(I),S.appendChild(W("span",{className:"sr-only",textContent:m}))}else{const E=W("span",{textContent:m});S.appendChild(E)}if(o.excludable?.includes(v)){const E=W("button",{type:"button",className:"exclude-filter-btn",dataset:{value:v,type:n},attributes:{"aria-label":`Excluir ${o.label} ${m}`},innerHTML:G.PAUSE_SMALL});S.appendChild(E)}p.appendChild(S)}),l.appendChild(p)};Object.keys(ie).forEach(t);const e=async()=>{try{const[n,o]=await Promise.all([rr(),ir()]);n&&n.length>0&&(ie.actor.items=n.reduce((s,l)=>({...s,[l]:l}),{}),t("actor")),o&&o.length>0&&(ie.director.items=o.reduce((s,l)=>({...s,[l]:l}),{}),t("director"))}catch{}};if("requestIdleCallback"in window?requestIdleCallback(e):setTimeout(e,500),mt.get("rotationState")==="disabled"&&document.body.classList.add("rotation-disabled"),b.toggleRotationBtn){const n=document.body.classList.contains("rotation-disabled");b.toggleRotationBtn.innerHTML=n?G.SQUARE_STOP:G.PAUSE,b.toggleRotationBtn.setAttribute("aria-label",n?"Activar rotación de tarjetas":"Pausar rotación de tarjetas"),b.toggleRotationBtn.title=n?"Giro automático":"Vista Rápida",b.toggleRotationBtn.setAttribute("aria-pressed",n)}oi(),ri(),fi(),ii(),ui(),li(),document.addEventListener("updateSidebarUI",()=>{b.sidebarFilterForms.forEach(s=>{const l=s.querySelector(X.SIDEBAR_FILTER_INPUT);l&&(l.value="")});const o=(ue().year||`${B.YEAR_MIN}-${B.YEAR_MAX}`).split("-").map(Number);b.yearSlider?.noUiSlider&&b.yearSlider.noUiSlider.set(o,!1),requestAnimationFrame(()=>{ne()})}),document.addEventListener("filtersReset",pt),document.addEventListener("uiActionTriggered",pt)}export{N as closeMobileDrawer,pt as collapseAllSections,pi as initSidebar,yt as openMobileDrawer};
