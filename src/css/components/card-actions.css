/* ================================================================= */

/* --- Botón de Acción Individual (ej. Watchlist) --- */

.card-action-btn {
    width: 28px;  /* Círculo aún más pequeño */
    height: 28px; /* Círculo aún más pequeño */
    padding: 0;
    border: none;
    border-radius: var(--radius-round);
    background-color: transparent;
    color: var(--color-accent); /* Mismo color que las estrellas por defecto */
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease;
}

.card-action-btn:hover {
    transform: scale(1.1);
}

.card-action-btn svg {
    width: 14px;  /* Ojo aún más pequeño */
    height: 14px; /* Ojo aún más pequeño */
    transition: all 0.2s ease;
}

/* --- Estado ACTIVO para el botón de Watchlist --- */

.card-action-btn.is-active {
    background-color: transparent;
}

/* El icono del ojo (iris y contorno) se vuelve amarillo cuando está activo */
.card-action-btn.is-active svg {
    color: #FFC107; /* Amarillo dorado, igual que las estrellas de usuario */
    transform: scale(1.1);
}

/* Rellena solo la forma del ojo, no el iris */
.card-action-btn.is-active svg path {
    fill: #FFC107;
}

/* Rellena el iris (círculo central) con un color oscuro para que contraste */
.card-action-btn.is-active svg circle {
    fill: var(--color-bg); /* Usa el color de fondo para el iris */
    stroke: var(--color-bg); /* Y también para el borde del iris */
}


/* --- Estilos para las Estrellas y Círculo de Valoración Interactivas --- */

/* Añade el cursor de puntero solo cuando los elementos son interactivos (usuario logueado) */
.star-rating-container.is-interactive,
.low-rating-circle.is-interactive {
    cursor: pointer;
}

.star-rating-container.is-interactive .star-icon,
.low-rating-circle.is-interactive {
    transition: transform 0.1s ease-out;
}

/* Efecto hover sobre las estrellas interactivas para dar feedback */
.star-rating-container.is-interactive:hover .star-icon,
.low-rating-circle.is-interactive:hover {
    transform: scale(1.2);
}

/* Cuando una valoración de usuario existe, las estrellas cambian a un color distintivo */
.star-rating-container.has-user-rating .star-icon-path {
    stroke: #FFC107; /* Amarillo dorado para el borde */
}

.star-rating-container.has-user-rating .star-icon-path--filled {
    fill: #FFC107; /* Amarillo dorado para el relleno */
}

/* Cuando el círculo representa la valoración "suspenso" del usuario */
.low-rating-circle.has-user-rating {
    border-color: #FFC107;
    background-color: transparent; /* Explícitamente transparente */
}

/* Nuevo contenedor para las estrellas en la tarjeta */
.card-rating-block {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    transform: translateY(66.66%); /* Desplazado 2/3 hacia abajo */
    z-index: 5;
    display: flex;
    justify-content: space-between; /* Coloca los elementos en los extremos */
    align-items: center;
    padding: 0 var(--space-sm); /* Añade padding horizontal */
    /* Se eliminan los estilos de fondo para un look más limpio */
    background-color: transparent;
    backdrop-filter: none;
    box-shadow: none;
    pointer-events: none; /* El contenedor no captura clics */
}

/* Permite que los hijos del contenedor sí capturen clics */
.card-rating-block > * {
    pointer-events: auto;
}

/* --- Scrollable Content en la cara trasera de la tarjeta --- */

/* Contenedor scrollable para sinopsis y crítica en la tarjeta */
.flip-card-back .scrollable-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 30%; /* Altura inicial, mostrando solo parte de la sinopsis */
    padding: 0 var(--space-md) var(--space-md);
    background-color: var(--color-surface);
    overflow: hidden;
    transition: height 3s ease-out; /* Animación de altura más rápida */
    z-index: 5;
}

/* Estado expandido */
.flip-card-back .scrollable-content.full-view {
    height: 100%; /* Ocupa toda la altura de la cara trasera */
    overflow-y: auto; /* Habilita scroll */
}

/* Degradado inferior para indicar que hay más contenido */
.flip-card-back .scrollable-content::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 40px;
    background: linear-gradient(to top, var(--color-surface) 30%, transparent);
    pointer-events: none;
    transition: opacity 0.3s ease;
    opacity: 1;
}

/* Oculta el degradado cuando está expandido */
.flip-card-back .scrollable-content.full-view::after {
    opacity: 0;
}